!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(!C.totalMarks)return!1;if(C.movePart)1===O.partsNow.length&&O.partsNow[0].moveSelf(t);else if(C.moveMap){E.attr("class","mouse-movemap");var e=C.current.mouseBias(t).map(function(t){return t*C.current.zoom}),n=C.SVG();C.SVG(n[0]+e[0],n[1]+e[1]),n=C.SVG(),C.bias(n[0]%C.size(),n[1]%C.size()),E.css("background-position",C.bias().join("px ")+"px"),(0,g.$)("#area-of-parts").attr("transform","translate("+n.join(",")+") scale("+C.zoom()+")")}else C.boxDraw?schematic.drawRectselect(t):C.deformLine?O.partsNow[0].deformSelf(t):C.moveText?O.partsNow[0].moveText(t):C.newMark?O.partsNow[0].moveSelf(t):C.drawLine?O.partsNow[O.partsNow.length-1].setPath(t):C.graphSelecte&&C.current.graph.drawSelect(t,C.current);return!1}function i(){o();for(var t=0;t<O.partsNow.length;t++)O.partsNow[t].toStatus("normal"),O.partsNow[t].current={};O.partsNow.deleteAll()}function a(t,e){var n=void 0;return"object"===("undefined"==typeof t?"undefined":(0,h["default"])(t))&&e!==A?n=new x.LineClass(t,e):"string"==typeof t&&e===A&&(n=new _.PartClass(t)),n.focusOnly(),n}function o(t,e){var n=(0,g.$)("#right-button-menu"),r={free:"right-map",single:"right-part",more:"right-moreparts",line:"right-line"};if("close"===e||void 0===e)return n.attr("class",""),!1;n.attr("class",r[e]),n.css({left:0,top:0,opacity:0});var i=(0,g.$)(window),a=i.height(),o=j.hasClass("open-add-parts")?i.width()-j.width():i.width(),s=n.width(),u=n.height(),l=o-t.pageX<s?t.pageX-s:t.pageX,c=a-t.pageY<u?t.pageY-u:t.pageY;n.css({left:l,top:c,opacity:1})}function s(t){for(var e=1.6,n=61,r=(0,g.$)(window).height(),i=(0,g.$)(window).width(),a=!!t.voltage.length+!!t.current.length,o=r-n,s=o/a,u=(0,g.$)("#graph-main"),l=r*e<i?r*e:i,c=g.$.maxSelect("div.graph-individual",u,a),p=0;p<c.length;p++){var h=c.get(p);h.childrens().remove(),h.css("height",s+"px")}R.attr("style","width: "+l+"px");for(var f=0;f<2;f++){var d=["voltage","current"][f];if(t[d].length){var y=2===c.length?f:0;c.get(y).attr("id","graphForm-"+f),c.get(y).prop("_data",new M.Graph(t[d],c[y],d))}}var v=R.height(),m=R.width(),w=66,b=63.6,x=Math.sqrt((w-m)*(w-m)+(b-v)*(b-v)),T=[[x-m+w,x-v],[x-m+w,x+b+10],[x+w+10,x+b+10],[x+w+10,x-v]].map(function(t){return t.join("px ")}).join("px,")+"px";R.attr("class","run");var _=R.append((0,g.$)("<div>",{id:"background-circle",style:"position: absolute; background-color: #66CCCC; border-radius: 50%;-webkit-clip-path: polygon("+T+");margin : 0; right: "+w+"px; bottom: "+b+"px; width: "+2*x+"px; height: "+2*x+"px; transform: translate(50%,50%)"})),O=new S.styleRule("graph-vision");O.setRule("0%",{width:"0px",height:"0px","-webkit-clip-path":"circle(0)"}),O.setRule("100%",{width:2*x+"px",height:2*x+"px","-webkit-clip-path":"circle(200vh)"}),setTimeout(function(){R.attr("class","visionAll"),_.remove()},600)}function u(t){for(var e=0;e<t.length;e++)if("line"!==t[e].partType&&"config"!==t[e].partType){var n=new _.PartClass(t[e]);n.elementDOM.attr("opacity",1),n.markSign()}else if("config"===t[e].partType)for(var r in t[e])if(t[e].hasOwnProperty(r)){if("partType"===r)continue;(0,g.$)(r).prop("value",t[e][r])}for(var i=0;i<t.length;i++)if("line"===t[i].partType){for(var a=new x.LineClass(t[i].way[0]),o=1;o<t[i].way.length;o++)a.way.push(t[i].way[o]);a.current=[0,[],[],[],[],[],!1,!1,[]],a.toGoing(),O.partsNow.push(a);for(var s=0;s<2;s++){var u=a.way[s*(a.way.length-1)],l=w.schMap.getSingleValueByOrigin(u);if("part-point"===l.form){var c=O.partsAll.findPartObj(l.id.slice(0,l.id.search("-")));c.connectPoint(l.id.slice(l.id.search("-")+1),a.id),a.setConnect(s,l.id)}else"line-point"===l.form?(l.form="cross-point",l.id+=" "+a.id):"cross-point"===l.form&&(l.id+=" "+a.id)}a.render(),a.markSign()}for(var p in w.schMap)if(w.schMap.hasOwnProperty(p))for(var h in w.schMap[p])if(w.schMap[p].hasOwnProperty(h)){var f=w.schMap[p][h];"cross-point"===f.form&&!function(){for(var t=[20*parseInt(p),20*parseInt(h)],e=f.id.split(" ").map(function(e){var n=O.partsAll.findPartObj(e),r=n.findConnect(t);return[n,r]}),n=0;n<e.length;n++){var r=f.id.search(e[n][0].id+" ")!==-1?f.id.replace(e[n][0].id+" ",""):f.id.replace(" "+e[n][0].id,"");e[n][0].setConnect(e[n][1],r)}}()}}var l=n(2),c=e(l),p=n(59),h=e(p),f=n(79),d=e(f),y=n(82),v=e(y),g=n(86),m=n(87),w=n(104),b=n(105),x=n(106),T=n(111),M=n(116),S=n(117),_=n(120),O=n(110);n(121);var k=document,P="http://www.w3.org/2000/svg",A=void 0,C=new function(){function t(t){return new b.Point([(t.pageX-h)/l,(t.pageY-f)/l])}function e(t){var e=new b.Point([(t.pageX-y)/l,(t.pageY-g)/l]);return y=t.pageX,g=t.pageY,e}for(var n=this,r=0,i=["newMark","movePart","moveMore","moveMap","boxDraw","deformLine","moveText","drawLine","graphSelecte"],a=function(t){(0,d["default"])(n,i[t],{enumerable:!0,configurable:!0,get:function(){return!!(r&1<<t)}});var e="set"+i[t].substring(0,1).toUpperCase()+i[t].substring(1);n[e]=function(e){e=Number(!!e),e?r|=1<<t:r&=65535^1<<t}},o=0;o<i.length;o++)a(o);Object.defineProperty(this,"totalMarks",{enumerable:!0,configurable:!0,get:function(){return!!r}});var s=20,u=1,l=1,c=0,p=0,h=0,f=0,y=0,g=0;this.size=function(t){return t===A?s:void(s=t)},this.rate=function(t){return t===A?u:void(u=t)},this.zoom=function(t){return t===A?l:void(l=t)},this.bias=function(t,e){return t===A&&e===A?[c,p]:void(t!==A&&e!==A?(c=t,p=e):t instanceof Array&&A===A&&(c=t[0],p=t[1]))},this.SVG=function(t,e){return t===A&&e===A?[h,f]:void(t!==A&&e!==A?(h=t,f=e):t instanceof Array&&A===A&&(h=t[0],f=t[1]))},this.mouse=function(e){return t(e)},this.createData=function(n){return e(n),{isMove:!1,isNew:this.newMark,zoom:this.zoom(),SVG:this.SVG(),mouse:t,mouseBias:e,pageL:new b.Point([n.pageX,n.pageY]),gridL:[]}},this.current=[],(0,v["default"])(this)},j=(0,g.$)("#sidebar-menu"),V=(0,g.$)("#action-container"),E=(0,g.$)("#container-grid"),N=(0,g.$)("#parameter-menu"),R=(0,g.$)("#graph-page");j.on({mousemove:function(t){(0,g.$)("#float-tool-tip").css({bottom:window.innerHeight-t.pageY+"px",right:window.innerWidth-t.pageX+"px"})},mouseenter:function(t){var e=_.partsinfo.intro[t.currentTarget.id];(0,g.$)("#float-tool-tip").css({display:"block",width:16*e.length+"px"}).text(e)},mouseleave:function(){(0,g.$)("#float-tool-tip").css({display:"none"},!0)},click:function(t){1===t.which&&(C.totalMarks||(i(),C.setNewMark(!0),a(t.currentTarget.id).current.extend(C.createData(t)),E.on("mousemove",r)))}},".parts-list"),j.on("click","#menu-add-parts-close",function(t){1===t.which&&((0,g.$)("#menu-add-parts-close").addClass("disappear"),(0,g.$)(document.body).removeClass("open-sidebar open-gray"),j.removeClass("open-menu-config open-add-parts"))}),V.on("click","#fab-config",function(t){1===t.which&&((0,g.$)(document.body).addClass("open-sidebar open-gray"),j.addClass("open-menu-config"))}),V.on("click","#fab-adds",function(t){1===t.which&&((0,g.$)(document.body).addClass("open-sidebar"),j.addClass("open-add-parts"),(0,g.$)("#menu-add-parts-close").removeClass("disappear"))}),V.on("click","#fab-run",function(t){if(1!==t.which)return!1;i();for(var e=10,n=V.childrens(),r=(0,g.$)("#fab-run"),a=(0,g.$)("#fab-text"),o=a.childrens(0),u={voltage:[],current:[]},l=1;l<n.length;l++)n.get(l).css("display","none");r.css("display","none"),a.css("display",""),o.text("0%");var c=O.partsAll.connectGraph().map(function(t){var e={solver:new T.Solver(t)};return e.iteration=e.solver.solve(),e});setTimeout(function p(){for(var t=(new Date).getTime(),i=500,l=0,h=!1;l<i&&!h;){for(var f=0;f<c.length;f++)c[f].now=c[f].iteration.next(),h|=c[f].now.done;l=(new Date).getTime()-t}if(h){o.text("100%");for(var d=0;d<c.length;d++)u.voltage=u.voltage.concat(c[d].solver.observeVoltage),u.current=u.current.concat(c[d].solver.observeCurrent);u.voltage.time=c[0].solver.observeVoltage.time,u.voltage.stepTime=c[0].solver.observeVoltage.stepTime,u.current.time=c[0].solver.observeCurrent.time,u.current.stepTime=c[0].solver.observeCurrent.stepTime,setTimeout(function(){s(u)},e),setTimeout(function(){o.text(""),r.css("display",""),a.css("display","none");for(var t=1;t<n.length;t++)n.get(t).css("display","")},1e3)}else o.text(c[0].now.value+"%"),setTimeout(p,e)},e)}),N.on("click","#parameter-bottom-cancel",function(){(0,g.$)(k.body).removeClass("open-gray"),N.css("z-index","20"),N.attr("class","parameter-close"),setTimeout(function(){N.css("z-index","")},350)}),N.on("click","#parameter-bottom-accept",function(){O.partsNow[0].inputVision()&&((0,g.$)(k.body).removeClass("open-gray"),N.css("z-index","20"),N.attr("class","parameter-close"),setTimeout(function(){N.css("z-index","")},350))}),E.on("mousewheel",function(t){if(!(0,g.$)(k.body).hasClass("open-gray")){var e=[t.pageX,t.pageY],n=C.size();if(t.deltaY>0?C.size(n-5):t.deltaY<0&&C.size(n+5),C.size()<20)return C.size(20),!0;if(C.size()>80)return C.size(80),!0;var r=C.size();C.rate(r/n),C.zoom(r/20);var i=C.SVG();C.SVG(Math.round(e[0]-C.rate()*(e[0]-i[0])),Math.round(e[1]-C.rate()*(e[1]-i[1]))),i=C.SVG(),C.bias(i[0]%r,i[1]%r),E.css({"background-size":r+"px","background-position":C.bias().join("px ")+"px"}),(0,g.$)("#area-of-parts").attr("transform","translate("+i.join(",")+") scale("+C.zoom()+")")}}),(0,g.$)("#shade-gray").on("click",function(){var t=(0,g.$)(k.body);t.hasClass("open-sidebar")&&(t.removeClass("open-gray open-sidebar"),j.removeClass("open-menu-config open-add-parts"))}),E.on("mousedown","g.editor-parts .focus-part, g.editor-parts path, g.editor-parts .features-text",function(t){if(C.totalMarks)return!1;var e=O.partsAll.findPartObj(t.currentTarget.parentNode.id);if(1===t.which){if(i(),"text"===t.currentTarget.tagName){var n=(0,g.$)(this);e.focusOnly(),e.current.extend(C.createData(t)).extend({text:n,position:[parseInt(n.attr("x")),parseInt(n.attr("y"))]}),C.setMoveText(!0)}else e.focusOnly(),e.current.extend(C.createData(t)).extend({map:w.schMap}),C.setMovePart(!0);E.on("mousemove",r)}else 3===t.which&&(O.partsNow.has(e.id)&&O.partsNow.length>1?o(t,"more"):(i(),e.focusOnly(),o(t,"single")));return!1}),E.on("dblclick","g.editor-parts .focus-part, g.editor-parts path, g.editor-parts .features-text",function(t){var e=O.partsAll.findPartObj(t.currentTarget.parentNode.id);1!==t.which||C.totalMarks||e.viewParameter(C.zoom(),C.SVG())}),E.on({mouseenter:function(t){var e=t.currentTarget.tagName.toLowerCase(),n=(0,g.$)(t.currentTarget);if(C.totalMarks){if(C.drawLine&&"text"!==e&&!n.hasClass("line-rect")){var r=O.partsNow[O.partsNow.length-1];r.current.enforceAlign.extend({flag:!0,onPart:!0,part:O.partsAll.findPartObj(t.currentTarget.parentNode.id)})}}else"rect"===e||"text"===e?E.attr("class","mouse-movepart"):"g"===e&&n.hasClass("point-close")&&E.attr("class","mouse-closepoint")},mouseleave:function(){if(C.totalMarks){if(C.drawLine){var t=O.partsNow[O.partsNow.length-1];t.current.enforceAlign.label&&t.current.enforceAlign.extend({flag:!0,part:!1,onPart:!1})}}else E.attr("class","")}},"g.editor-parts rect.focus-part, g.editor-parts g.part-point, g.editor-parts text, g.line rect.line-rect"),E.on("mousedown","g.editor-parts g.part-point",function(t){if(1===t.which&&!C.totalMarks){var e=O.partsAll.findPartObj(t.currentTarget.parentNode.id),n=parseInt(t.currentTarget.id.split("-")[1]);if(i(),e.connect[n]){var o=O.partsAll.findPartObj(e.connect[n]);o.focusOnly(),o.current=C.createData(t),o.reDraw(t,e,n),E.attr("class","mouse-line")}else e.focusOnly(),a(e,n).current.extend(C.createData(t)),E.attr("class","mouse-line");C.setDrawLine(!0),E.on("mousemove",r)}return!1}),E.on("mousedown",function(t){return!C.totalMarks&&void(3===t.which&&(E.on("mousemove",r),C.current=C.createData(t),C.setMoveMap(!0)))}),E.on("mouseup",function(t){E.off("mousemove",r),1===t.which?C.newMark?(C.setNewMark(!1),O.partsNow[0].putDownSelf(w.schMap),O.partsNow[0].elementDOM.attr("opacity","1")):C.movePart?(C.setMovePart(!1),1===O.partsNow.length?O.partsNow[0].putDownSelf(w.schMap):putdownMoreParts(O.partsNow)):C.boxDraw?(C.setBoxDraw(!1),C.movemouse&&schematic.focusRectselect(t)):C.deformLine?(C.setDeformLine(!1),C.movemouse&&O.partsNow[0].deformSelfEnd()):C.moveText?(C.setMoveText(!1),O.partsNow[0].current.isMove&&(O.partsNow[0].textVisition([parseInt(O.partsNow[0].current.text.attr("x")),parseInt(O.partsNow[0].current.text.attr("y"))]),delete O.partsNow[0].current)):C.drawLine?(C.setDrawLine(!1),O.partsNow[O.partsNow.length-1].drawLineEnd()):i():3===t.which&&C.moveMap&&(C.setMoveMap(!1),C.current=[],E.hasClass("mouse-movemap")||(i(),o(t,"free"))),E.attr("class","")}),E.on("mousedown","g.line g.draw-open",function(t){if(1===t.which){var e=O.partsAll.findPartObj(t.currentTarget.parentNode.id);C.totalMarks||(i(),e.focusOnly(),e.current=C.createData(t),e.reDraw(t),E.attr("class","mouse-line"),C.setDrawLine(!0))}return E.on("mousemove",r),!1}),E.on({mousemove:function(t){return C.totalMarks||!function(){var e=C.mouse(t),n=e.roundToSmall(),r=e.add(-1,n.mul(20)),i="",a=[];Math.abs(r[0])>Math.abs(r[1])?r[0]>0?(i="right",a=n.add([1,0])):(i="left",a=n.add([-1,0])):r[1]>0?(i="down",a=n.add([0,1])):(i="up",a=n.add([0,-1]));var o=w.schMap.getSingleValueBySmalle(n).connect;o.some(function(t,e){return a.isEqual(o[e])})?E.attr("class","mouse-cross"+i):E.attr("class","")}(),!1},mouseleave:function(){return C.totalMarks||E.attr("class",""),!1},mousedown:function(t){if(1===t.which&&!C.totalMarks){var e=function(){var e=/right|left|up|down/,n=C.SVG(),r=[Math.round((t.pageX-n[0])/C.zoom()*.05),Math.round((t.pageY-n[1])/C.zoom()*.05)],i=(E.attr("style")||"").match(e),a={right:[1,0],left:[-1,0],up:[0,-1],down:[0,1]}[i],o=r.add(a);if(!i)return{v:!1};var s=O.partsAll.findPartObj(w.schMap.getSingleValueBySmalle(o).id),u=w.schMap.getSingleValueBySmalle(r).id.split(" ").map(function(t){return O.partsAll.findPartObj(t)}).filter(function(t){return t!==s});O.partsNow.deleteAll(),s.focusOnly(),2===u.length?(u[0].mergeLine(u[1]),s.tuneStart(t)):3===u.length&&s.tuneStart(t,u),C.setDrawLine(!0)}();if("object"===("undefined"==typeof e?"undefined":(0,h["default"])(e)))return e.v}}},"g.line g.cross-point"),R.on("click","#waveRecover",function(){(0,g.$)("#graph-main .graph-individual").each(function(t){var e=t._data,n=[0,e.time],r=[Math.minOfArray(e.output.map(function(t){return Math.minOfArray(t.data)})),Math.maxOfArray(e.output.map(function(t){return Math.maxOfArray(t.data)}))];e.clearActionCanvas(),e.drawBackground(n,r,!0),e.drawCurve()})}),R.on("click","#waveToImage",function(){var t=(0,g.$)(window.open("about:blank").document.body);t.css({margin:"0px",padding:"0px"}),t.append((0,g.$)("<img>",{src:M.Graph.toImage()}))}),R.on("click","#waveToData",function(){for(var t=[],e=window.open("about:blank"),n=(0,g.$)("#graph-main .graph-individual").map(function(t){return t._data}),r=n[0].stepTime,i="<p>time,",a=0;a<n.length;a++)for(var o=0;o<n[a].output.length;o++)t.push(n[a].output[o]);for(var s=0;s<t.length;s++)i+=t[s].name+", ";i+="</p>";for(var u=0;u<t[0].data.length;u++){i+="<p>"+(u*r).toSFixed()+", ";for(var l=0;l<t.length;l++)i+=t[l].data[u]+", ";i+="</p>"}e.document.body.innerHTML=i}),R.on("click","#waveClose",function(){R.attr("class","disappear"),setTimeout(function(){R.attr({"class":"silence",style:"display:none;"})},500)}),R.on("click","tr.graph-table-row",function(t){var e=t.currentTarget.id.split("-").pop(),n=(0,g.$)("#graph-"+e),r=[/display *: *none/,/display *: *block/],i=n.attr("style");i.search(r[0])!==-1?n.attr("style",i.replace(r[0],"display:block")):i.search(r[1])!==-1&&n.attr("style",i.replace(r[1],"display:none"));var a=t.currentTarget.querySelector(".graph-table-legend-label");a.innerHTML.search("strike")!==-1?a.innerHTML=a.innerHTML.replace(/<\/?strike>/g,""):a.innerHTML=a.innerHTML.strike();for(var o=t.currentTarget.parentNode.parentNode.parentNode._data,s=0;s<o.output.length;s++)o.output[s].name===e&&(o.output[s].status=!o.output[s].status)}),R.on("mousemove",".graph-action",function(t){if(!C.totalMarks){for(var e=t.currentTarget.parentNode._data,n=(0,g.$)("#graph-main .graph-individual").map(function(t){return t._data}),r=e.drawMove(t.offsetX,t.offsetY),i=0;i<n.length;i++)n[i]!==e&&n[i].drawMove(t.offsetX,r);return!1}}),R.on("mouseleave",".graph-action",function(){if(!C.totalMarks)return(0,g.$)("#graph-main .graph-individual").each(function(t){return t._data.clearActionCanvas()}),!1}),R.on("mousedown",".graph-action",function(t){return 1===t.which&&void(C.totalMarks||((0,g.$)("#graph-main .graph-individual").each(function(t){return t._data.clearActionCanvas()}),C.current={graph:t.currentTarget.parentNode._data,start:[t.offsetX,t.offsetY],canvas:t.currentTarget.querySelector(".graph-action-canvas")},C.setGraphSelecte(!0),R.on("mousemove",r),R.addClass("mouse-select")))}),R.on("mouseup",function(){C.totalMarks&&C.graphSelecte&&!function(){R.off("mousemove",r),R.removeClass("mouse-select"),C.setGraphSelecte(!1);var t=C.current.graph,e=t.pixel2Value(C.current.select),n=(0,c["default"])(e,2),i=n[0],a=n[1];t.clearActionCanvas(),t.drawBackground(i,a),t.drawCurve(),(0,g.$)("#graph-main .graph-individual").each(function(e){e._data!==t&&(e._data.clearActionCanvas(),e._data.drawBackground(i,[Math.minOfArray(e._data.output.map(function(t){return Math.minOfArray(t.data)})),Math.maxOfArray(e._data.output.map(function(t){return Math.maxOfArray(t.data)}))]),e._data.drawCurve())}),C.current=[]}()}),k.body.onload=function(){var t={reference_ground:"scale(1.3, 1.3)",transistor_npn:"translate(-5,0)"},e={run:{"long":1580,transform:[86,100],d:"M1384 609l-1328 -738q-23 -13 -39.5 -3t-16.5 36v1472q0 26 16.5 36t39.5 -3l1328 -738q23 -13 23 -31t-23 -31z"},adds:{"long":1408,transform:[0,0],d:"M1408 800v-192q0 -40 -28 -68t-68 -28h-416v-416q0 -40 -28 -68t-68 -28h-192q-40 0 -68 28t-28 68v416h-416q-40 0 -68 28t-28 68v192q0 40 28 68t68 28h416v416q0 40 28 68t68 28h192q40 0 68 -28t28 -68v-416h416q40 0 68 -28t28 -68z"},config:{"long":1920,transform:[-30,200],d:"M896 640q0 106 -75 181t-181 75t-181 -75t-75 -181t75 -181t181 -75t181 75t75 181zM1664 128q0 52 -38 90t-90 38t-90 -38t-38 -90q0 -53 37.5 -90.5t90.5 -37.5t90.5 37.5t37.5 90.5zM1664 1152q0 52 -38 90t-90 38t-90 -38t-38 -90q0 -53 37.5 -90.5t90.5 -37.5 t90.5 37.5t37.5 90.5zM1280 731v-185q0 -10 -7 -19.5t-16 -10.5l-155 -24q-11 -35 -32 -76q34 -48 90 -115q7 -10 7 -20q0 -12 -7 -19q-23 -30 -82.5 -89.5t-78.5 -59.5q-11 0 -21 7l-115 90q-37 -19 -77 -31q-11 -108 -23 -155q-7 -24 -30 -24h-186q-11 0 -20 7.5t-10 17.5 l-23 153q-34 10 -75 31l-118 -89q-7 -7 -20 -7q-11 0 -21 8q-144 133 -144 160q0 9 7 19q10 14 41 53t47 61q-23 44 -35 82l-152 24q-10 1 -17 9.5t-7 19.5v185q0 10 7 19.5t16 10.5l155 24q11 35 32 76q-34 48 -90 115q-7 11 -7 20q0 12 7 20q22 30 82 89t79 59q11 0 21 -7 l115 -90q34 18 77 32q11 108 23 154q7 24 30 24h186q11 0 20 -7.5t10 -17.5l23 -153q34 -10 75 -31l118 89q8 7 20 7q11 0 21 -8q144 -133 144 -160q0 -9 -7 -19q-12 -16 -42 -54t-45 -60q23 -48 34 -82l152 -23q10 -2 17 -10.5t7 -19.5zM1920 198v-140q0 -16 -149 -31 q-12 -27 -30 -52q51 -113 51 -138q0 -4 -4 -7q-122 -71 -124 -71q-8 0 -46 47t-52 68q-20 -2 -30 -2t-30 2q-14 -21 -52 -68t-46 -47q-2 0 -124 71q-4 3 -4 7q0 25 51 138q-18 25 -30 52q-149 15 -149 31v140q0 16 149 31q13 29 30 52q-51 113 -51 138q0 4 4 7q4 2 35 20 t59 34t30 16q8 0 46 -46.5t52 -67.5q20 2 30 2t30 -2q51 71 92 112l6 2q4 0 124 -70q4 -3 4 -7q0 -25 -51 -138q17 -23 30 -52q149 -15 149 -31zM1920 1222v-140q0 -16 -149 -31q-12 -27 -30 -52q51 -113 51 -138q0 -4 -4 -7q-122 -71 -124 -71q-8 0 -46 47t-52 68 q-20 -2 -30 -2t-30 2q-14 -21 -52 -68t-46 -47q-2 0 -124 71q-4 3 -4 7q0 25 51 138q-18 25 -30 52q-149 15 -149 31v140q0 16 149 31q13 29 30 52q-51 113 -51 138q0 4 4 7q4 2 35 20t59 34t30 16q8 0 46 -46.5t52 -67.5q20 2 30 2t30 -2q51 71 92 112l6 2q4 0 124 -70 q4 -3 4 -7q0 -25 -51 -138q17 -23 30 -52q149 -15 149 -31z"}};(0,g.$)("#sidebar-menu #menu-add-parts button.parts-list").each(function(e){var n=(0,g.$)(e),r=n.append((0,g.$)("<svg>",P,{x:"0px",y:"0px",viewBox:"0 0 80 80"})).append((0,g.$)("<g>",P)),i=n.attr("id"),a=_.partsinfo.shape[i],o=t[i]?"translate(40,40) "+t[i]:"translate(40,40)";r.attr("transform",o);for(var s=0;s<a.length;s++)if("rect"!==a[s].name){var u=a[s],l=r.append((0,g.$)("<"+u.name+">",P));for(var c in u.attribute)if(u.attribute.hasOwnProperty(c)){if("class"===u.attribute[c])continue;l.attr(c,u.attribute[c])}}}),(0,g.$)("#action-container .fab").each(function(t){var n=(0,g.$)(t),r=n.attr("id").split("-")[1];if("text"!==r){var i=.6,a=e[r]["long"];n.append((0,g.$)("<svg>",P,{viewBox:"0 0 "+a+" "+a})).append((0,g.$)("<g>",P,{transform:"translate("+(e[r].transform[0]+(1-i)/2*a)+","+(e[r].transform[1]+(1-i)/2*a)+") scale("+i+","+i+")"})).append((0,g.$)("<path>",P,{d:e[r].d}))}});var n=(0,g.$)(".st-menu-title").prop("clientHeight"),r=(0,g.$)("#menu-add-parts-close"),i=r.prop("clientHeight");r.attr("style","top:"+(n-i)+"px;");var a=window.location.href.split("?")[1],o={};if(a&&a.length)for(var s=a.split("&"),l=0;l<s.length;l++){var c=s[l].replace(/#/g,"").split("=");o[c[0]]=c[1]}u(m.iniData[o.init]||[]);var p=(0,g.$)("#load-cover");p.css("opacity",0),setTimeout(function(){p.css("display","none")},300)}}).call(e,n(1))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function o(){y&&f&&(y=!1,f.length?d=f.concat(d):v=-1,d.length&&s())}function s(){if(!y){var t=i(o);y=!0;for(var e=d.length;e;){for(f=d,d=[];++v<e;)f&&f[v].run();v=-1,e=d.length}f=null,y=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,p,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,d=[],y=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(3),a=r(i),o=n(55),s=r(o);e["default"]=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=(0,s["default"])(t);!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,a["default"])(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={"default":n(4),__esModule:!0}},function(t,e,n){n(5),n(51),t.exports=n(53)},function(t,e,n){n(6);for(var r=n(17),i=n(21),a=n(9),o=n(48)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],c=r[l],p=c&&c.prototype;p&&!p[o]&&i(p,o,l),a[l]=a.Array}},function(t,e,n){"use strict";var r=n(7),i=n(8),a=n(9),o=n(10);t.exports=n(14)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports={}},function(t,e,n){var r=n(11),i=n(13);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(12);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(15),i=n(16),a=n(31),o=n(21),s=n(32),u=n(9),l=n(33),c=n(47),p=n(49),h=n(48)("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",v="values",g=function(){return this};t.exports=function(t,e,n,m,w,b,x){l(n,e,m);var T,M,S,_=function(t){if(!f&&t in A)return A[t];switch(t){case y:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",k=w==v,P=!1,A=t.prototype,C=A[h]||A[d]||w&&A[w],j=C||_(w),V=w?k?_("entries"):j:void 0,E="Array"==e?A.entries||C:C;if(E&&(S=p(E.call(new t)),S!==Object.prototype&&(c(S,O,!0),r||s(S,h)||o(S,h,g))),k&&C&&C.name!==v&&(P=!0,j=function(){return C.call(this)}),r&&!x||!f&&!P&&A[h]||o(A,h,j),u[e]=j,u[O]=g,w)if(T={values:k?j:_(v),keys:b?j:_(y),entries:V},x)for(M in T)M in A||a(A,M,T[M]);else i(i.P+i.F*(f||P),e,T);return T}},function(t,e){t.exports=!0},function(t,e,n){var r=n(17),i=n(18),a=n(19),o=n(21),s="prototype",u=function(t,e,n){var l,c,p,h=t&u.F,f=t&u.G,d=t&u.S,y=t&u.P,v=t&u.B,g=t&u.W,m=f?i:i[e]||(i[e]={}),w=m[s],b=f?r:d?r[e]:(r[e]||{})[s];f&&(n=e);for(l in n)c=!h&&b&&void 0!==b[l],c&&l in m||(p=c?b[l]:n[l],m[l]=f&&"function"!=typeof b[l]?n[l]:v&&c?a(p,r):g&&b[l]==p?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(p):y&&"function"==typeof p?a(Function.call,p):p,y&&((m.virtual||(m.virtual={}))[l]=p,t&u.R&&w&&!w[l]&&o(w,l,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(20);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(22),i=n(30);t.exports=n(26)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(23),i=n(25),a=n(29),o=Object.defineProperty;e.f=n(26)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(26)&&!n(27)(function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(24),i=n(17).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(21)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(34),i=n(30),a=n(47),o={};n(21)(o,n(48)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(23),i=n(35),a=n(45),o=n(42)("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=n(28)("iframe"),r=a.length,i="<",o=">";for(e.style.display="none",n(46).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+o+"document.F=Object"+i+"/script"+o),t.close(),l=t.F;r--;)delete l[u][a[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=r(t),n=new s,s[u]=null,n[o]=t):n=l(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(22),i=n(23),a=n(36);t.exports=n(26)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,u=0;s>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(37),i=n(45);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(32),i=n(10),a=n(38)(!1),o=n(42)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=o&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e,n){var r=n(10),i=n(39),a=n(41);t.exports=function(t){return function(e,n,o){var s,u=r(e),l=i(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(40),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(40),i=Math.max,a=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(43)("keys"),i=n(44);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(17),i="__core-js_shared__",a=r[i]||(r[i]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(17).document&&document.documentElement},function(t,e,n){var r=n(22).f,i=n(32),a=n(48)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){var r=n(43)("wks"),i=n(44),a=n(17).Symbol,o="function"==typeof a,s=t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(32),i=n(50),a=n(42)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var r=n(13);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(52)(!0);n(14)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(40),i=n(13);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):(a-55296<<10)+(o-56320)+65536)}}},function(t,e,n){var r=n(54),i=n(48)("iterator"),a=n(9);t.exports=n(18).isIterable=function(t){
var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(r(e))}},function(t,e,n){var r=n(12),i=n(48)("toStringTag"),a="Arguments"==r(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),i))?n:a?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){t.exports={"default":n(56),__esModule:!0}},function(t,e,n){n(5),n(51),t.exports=n(57)},function(t,e,n){var r=n(23),i=n(58);t.exports=n(18).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(54),i=n(48)("iterator"),a=n(9);t.exports=n(18).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(60),a=r(i),o=n(63),s=r(o),u="function"==typeof s["default"]&&"symbol"==typeof a["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(a["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e,n){t.exports={"default":n(61),__esModule:!0}},function(t,e,n){n(51),n(5),t.exports=n(62).f("iterator")},function(t,e,n){e.f=n(48)},function(t,e,n){t.exports={"default":n(64),__esModule:!0}},function(t,e,n){n(65),n(76),n(77),n(78),t.exports=n(18).Symbol},function(t,e,n){"use strict";var r=n(17),i=n(32),a=n(26),o=n(16),s=n(31),u=n(66).KEY,l=n(27),c=n(43),p=n(47),h=n(44),f=n(48),d=n(62),y=n(67),v=n(68),g=n(69),m=n(72),w=n(23),b=n(10),x=n(29),T=n(30),M=n(34),S=n(73),_=n(75),O=n(22),k=n(36),P=_.f,A=O.f,C=S.f,j=r.Symbol,V=r.JSON,E=V&&V.stringify,N="prototype",R=f("_hidden"),L=f("toPrimitive"),$={}.propertyIsEnumerable,q=c("symbol-registry"),D=c("symbols"),B=c("op-symbols"),I=Object[N],W="function"==typeof j,z=r.QObject,F=!z||!z[N]||!z[N].findChild,G=a&&l(function(){return 7!=M(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=P(I,e);r&&delete I[e],A(t,e,n),r&&t!==I&&A(I,e,r)}:A,H=function(t){var e=D[t]=M(j[N]);return e._k=t,e},Y=W&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},X=function(t,e,n){return t===I&&X(B,e,n),w(t),e=x(e,!0),w(n),i(D,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=M(n,{enumerable:T(0,!1)})):(i(t,R)||A(t,R,T(1,{})),t[R][e]=!0),G(t,e,n)):A(t,e,n)},U=function(t,e){w(t);for(var n,r=g(e=b(e)),i=0,a=r.length;a>i;)X(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?M(t):U(M(t),e)},Q=function(t){var e=$.call(this,t=x(t,!0));return!(this===I&&i(D,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(D,t)||i(this,R)&&this[R][t])||e)},J=function(t,e){if(t=b(t),e=x(e,!0),t!==I||!i(D,e)||i(B,e)){var n=P(t,e);return!n||!i(D,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=C(b(t)),r=[],a=0;n.length>a;)i(D,e=n[a++])||e==R||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===I,r=C(n?B:b(t)),a=[],o=0;r.length>o;)!i(D,e=r[o++])||n&&!i(I,e)||a.push(D[e]);return a};W||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===I&&e.call(B,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),G(this,t,T(1,n))};return a&&F&&G(I,t,{configurable:!0,set:e}),H(t)},s(j[N],"toString",function(){return this._k}),_.f=J,O.f=X,n(74).f=S.f=Z,n(71).f=Q,n(70).f=tt,a&&!n(15)&&s(I,"propertyIsEnumerable",Q,!0),d.f=function(t){return H(f(t))}),o(o.G+o.W+o.F*!W,{Symbol:j});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var et=k(f.store),nt=0;et.length>nt;)y(et[nt++]);o(o.S+o.F*!W,"Symbol",{"for":function(t){return i(q,t+="")?q[t]:q[t]=j(t)},keyFor:function(t){if(Y(t))return v(q,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){F=!0},useSimple:function(){F=!1}}),o(o.S+o.F*!W,"Object",{create:K,defineProperty:X,defineProperties:U,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),V&&o(o.S+o.F*(!W||l(function(){var t=j();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,E.apply(V,r)}}}),j[N][L]||n(21)(j[N],L,j[N].valueOf),p(j,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(t,e,n){var r=n(44)("meta"),i=n(24),a=n(32),o=n(22).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(27)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},h=function(t,e){if(!a(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},f=function(t){return l&&d.NEED&&u(t)&&!a(t,r)&&c(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:p,getWeak:h,onFreeze:f}},function(t,e,n){var r=n(17),i=n(18),a=n(15),o=n(62),s=n(22).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(36),i=n(10);t.exports=function(t,e){for(var n,a=i(t),o=r(a),s=o.length,u=0;s>u;)if(a[n=o[u++]]===e)return n}},function(t,e,n){var r=n(36),i=n(70),a=n(71);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(12);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(10),i=n(74).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(37),i=n(45).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(71),i=n(30),a=n(10),o=n(29),s=n(32),u=n(25),l=Object.getOwnPropertyDescriptor;e.f=n(26)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(67)("asyncIterator")},function(t,e,n){n(67)("observable")},function(t,e,n){t.exports={"default":n(80),__esModule:!0}},function(t,e,n){n(81);var r=n(18).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(26),"Object",{defineProperty:n(22).f})},function(t,e,n){t.exports={"default":n(83),__esModule:!0}},function(t,e,n){n(84),t.exports=n(18).Object.seal},function(t,e,n){var r=n(24),i=n(66).onFreeze;n(85)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(16),i=n(18),a=n(27);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){return!0}function a(){return!1}function o(t){return 1===t.nodeType||9===t.nodeType}function s(t){var e=!!t&&"length"in t&&t.length,n="undefined"==typeof t?"undefined":(0,w["default"])(t);return"function"!==n&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t){return"function"==typeof t}function l(t,e){var n=void 0;if(s(t)){n=t.length;for(var r=0;r<n&&e.call(t[r],r,t[r])!==!1;r++);}else for(var i in t)if(t.hasOwnProperty(i)&&e.call(t[i],i,t[i])===!1)break;return t}function c(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function p(t){return t.setAttribute&&t.classList&&t.hasAttribute}function h(t,e){var n=y();if(e=e.replace(" ",""),!e){for(var r=0;r<t.length;r++)n.push(t[r]);return n}for(var i=e.split(",").map(function(t){for(var e={tag:"",id:"","class":[]},n=(t||"").match(A)||[""],r=0;r<n.length;r++){var i=t.indexOf(n[r]);i?"#"===t[i-1]?e.id=n[r]:"."===t[i-1]&&e["class"].push(n[r]):e.tag=n[r].toLowerCase()}return e}),a=function(e){for(var r=[],a=i[e].id,o=i[e].tag,s=i[e]["class"],u=0;u<t.length;u++)(!a&&!o||!a&&o&&t[u].tagName.toLowerCase()===o||!o&&a&&t[u].getAttribute("id")===a||a&&o&&t[u].getAttribute("id")===a&&t[u].tagName.toLowerCase()===o)&&r.push(t[u]);s.length&&(r=r.filter(function(t){return s.every(function(e){return y(t).hasClass(e)})}));for(var l=0;l<r.length;l++)n.push(r[l])},o=0;o<i.length;o++)a(o);return n}function f(t){t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===x&&t.returnValue===!1?i:a,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,this.timeStamp=t&&t.timeStamp}function d(){this.expando=j}function y(t,e,n){return new y.fn.init(t,e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.$=void 0;var v=n(79),g=r(v),m=n(59),w=r(m),b=window,x=void 0,T="object",M="string",S="function",_="number",O=b.document,k=/\S+/g,P=/^key/,A=/[^.# ]+/g,C=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,j="event"+(1+Math.random()).toFixed(10).toString().replace(/\D/g,"");f.prototype={constructor:f,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=i,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=i,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=i,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},l({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,deltaY:!0,which:function(t){var e=t.button;return null==t.which&&P.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&C.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},function(t,e){(0,g["default"])(f.prototype,t,{enumerable:!0,configurable:!0,get:u(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){(0,g["default"])(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})}),d.prototype={cache:function(t){var e=t[this.expando];return e||(e={},o(t)&&(t[this.expando]=e)),e},get:function(t,e){return e===x?this.cache(t):t[this.expando]&&t[this.expando][e]},remove:function(t,e){var n=t[this.expando];if(n!==x){e=(e||"").match(k)||[""];for(var r=0;r<e.length;r++)delete n[e[r]];(e===x||c(n))&&(t.nodeType?t[this.expando]=x:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==x&&!c(e)}};var V={global:new d,add:function(t,e,n,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=V.global.get(t);if(p){(o=p.events)||(o=p.events={}),(a=p.handle)||(a=p.handle=function(e){return V.dispatch.apply(t,arguments)}),e=(e||"").match(k)||[""];for(var h=0;h<e.length;h++)l=e[h],l&&(c=V.special[l]&&V.special[l].bindType||l,s={type:c,origType:l,data:r,handler:n,selector:i,matches:y(i,y(t))},(u=o[c])||(u=o[c]=[],t.addEventListener&&t.addEventListener(c,a)),o[c].some(function(t,e,n){return i===t.selector&&(n[e]=s)})||u.push(s))}},dispatch:function(t){var e=V.fix(t),n=void 0,r=new Array(arguments.length),i=(V.global.get(this,"events")||{})[t.type]||[];r[0]=e;for(var a=1;a<arguments.length;a++)r[a]=arguments[a];e.delegateTarget=this,n=V.handlers.call(this,e,i);for(var o=0;o<n.length;o++)if(!e.isPropagationStopped()){var s=n[o],u=void 0,l=s.handlers.handler;if(e.currentTarget=s.elem,e.handleObj=s,e.data=s.handlers.data,e.type=s.handlers.origType,V.special[e.type]&&!V.special[e.type].bubble){var c=e.relatedTarget;c&&(c===s.elem||s.elem.contains(c))||(e.type=s.origType,u=l.apply(s.elem,r))}else u=l.apply(s.elem,r);e.type=s.type,void 0!==u&&(e.result=u)===!1&&(e.preventDefault(),e.stopPropagation())}return e.result},handlers:function(t,e){var n=void 0,r=[],i=e.length,a=t.target;if(i&&t.target.nodeType&&a!==this)for(;a!==this;a=a.parentNode||this)if(1===a.nodeType)for(n=0;n<i;n++){var o=e[n],s=o.selector,u=o.matches;if(s&&s.length){if(u.hasElem(a)){r.push({elem:a,handlers:o});break}if(u=y(s,y(this)),u.hasElem(a)){r.push({elem:a,handlers:o});break}}}for(n=0;n<i;n++){var l=e[n];if(!l.selector){r.push({elem:a,handlers:l});break}}return r},fix:function(t){return t[j]?t:new f(t)},remove:function(t,e,n,r){var i=V.global.hasData(t)&&V.global.get(t),a=i.events;if(i&&a){if(e=(e||"").match(k)||[""],!e[0]){e.length=0;for(var o in a)a.hasOwnProperty(o)&&e.push(o)}for(var s=0;s<e.length;s++){var u=e[s],l=a[u]||[],p=[];if("**"===r||r===x&&n===x)p.push(u);else{for(var h=0;h<l.length;h++){var f=l[h];if(r!==x&&n===x&&r===f.selector||r===x&&n!==x&&n===f.handler||r===f.selector&&n===f.handler){l.splice(h,1);break}}l.length||p.push(u)}for(var d=0;d<p.length;d++)t.removeEventListener(u,i.handle),delete a[u]}c(a)&&V.global.remove(t,"handle events")}},special:{mouseenter:{delegateType:"mouseover",bindType:"mouseover",bubble:!1},mouseleave:{delegateType:"mouseout",bindType:"mouseout",bubble:!1}}};y.fn=y.prototype={constructor:y,length:0,push:function(t){this[this.length]=t,this.length++},pop:function(){var t=this[this.length-1];return delete this[this.length-1],this.length--,y(t)},each:function(t){for(var e=0;e<this.length;e++)t(this[e],e)},map:function(t){for(var e=[],n=0;n<this.length;n++)e.push(t(this[n],n));return e},init:function(t,e,n){var r=this;if(t instanceof y.fn.init)return t;if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&"<"===t[0]&&">"===t[t.length-1]){if(("undefined"==typeof e?"undefined":(0,w["default"])(e))===M&&n===x)n=e,e={};else if(("undefined"==typeof e?"undefined":(0,w["default"])(e))===M&&("undefined"==typeof n?"undefined":(0,w["default"])(n))===T){var i=n;n=e,e=i}return t=t.substring(1,t.length-1),n?this.push(O.createElementNS(n,t)):this.push(O.createElement(t)),this.attr(e),this}var a=e?y(e):E;if(!t)return this;if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M)a.each(function(e){for(var n=e.querySelectorAll(t),i=0;i<n.length;i++)r.push(n[i])});else if(t.nodeType||t===b)return this[0]=t,this.length=1,this},css:function(t,e){var n=this,r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!t)return this;if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===T)if(r)!function(){var e="";for(var r in t)t.hasOwnProperty(r)&&(e+=r+"="+t[r]+";");n.each(function(t){return t.style=e})}();else{var i=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n.style[e]=t[e]})};for(var a in t)i(a)}else(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&("undefined"==typeof e?"undefined":(0,w["default"])(e))===M||("undefined"==typeof e?"undefined":(0,w["default"])(e))===_)&&(r?this.each(function(n){return n.style=t+"="+e+";"}):this.each(function(n){return n.style[t]=e}));return this},attr:function(t,e){var n=this;if(t instanceof Array){for(var r=[],i=0;i<t.length;i++)r.push(this.attr(t[i]));return r}if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===T){var a=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n.setAttribute(e,t[e])})};for(var o in t)a(o)}else if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&e!==x)this.each(function(n){return n.setAttribute(t,e.toString())});else if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&e===x)return this[0].getAttribute(t);return this},prop:function(t,e){var n=this;if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===T){var r=function(e){t.hasOwnProperty(e)&&n.each(function(n){return n[e]=t[e]})};for(var i in t)r(i);return this}if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&e!==x)this.each(function(n){return n[t]=e});else if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&e===x)return this[0][t];return this},removeAttr:function(t){("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&this.each(function(e){return e.removeAttribute(t)})},removeProp:function(t){("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&this.each(function(e){return delete e[t]})},addClass:function(t){t=(t||"").match(k)||[""],this.each(function(e){for(var n=0;n<t.length;n++)e.classList.add(t[n])})},removeClass:function(t){t=(t||"").match(k)||[""],this.each(function(e){for(var n=0;n<t.length;n++)e.classList.remove(t[n])})},hasClass:function(t){return this[0].classList.contains(t)},hasElem:function(t){for(var e=!1,n=0;n<this.length;n++)if(e|=this[n]===t)return e;return!1},on:function(t,e,n,r){var i={};return"object"===("undefined"==typeof t?"undefined":(0,w["default"])(t))?i=t:null==n&&null==r?(i[t]=e,n=e=x):null==r&&(("undefined"==typeof e?"undefined":(0,w["default"])(e))===M?(i[t]=n,n=x):(i[t]=n,n=e,e=x)),this.each(function(t){for(var r in i)i.hasOwnProperty(r)&&V.add(t,r,i[r],n,e)})},off:function(t,e,n){var r={};if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===T)r=t;else if(("undefined"==typeof e?"undefined":(0,w["default"])(e))===S)r[t]=e,e=void 0;else if(("undefined"==typeof e?"undefined":(0,w["default"])(e))===M&&n===x)r[t]=x;else if(("undefined"==typeof e?"undefined":(0,w["default"])(e))===M&&("undefined"==typeof n?"undefined":(0,w["default"])(n))===S)r[t]=n;else if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M&&e===x&&n===x)r[t]=x;else if(t===x)return this.each(function(t){return V.remove(t,"",x,e)});return this.each(function(t){for(var n in r)r.hasOwnProperty(n)&&V.remove(t,n,r[n],e)})},append:function(t){var e=this;return p(t)?this[0].appendChild(t):t instanceof y.fn.init&&t.each(function(t){return e[0].appendChild(t)}),y(t)},preappend:function(t,e){var n=this,r=e?e:this[0].childNodes[0],i=r instanceof y.fn.init?r[0]:r;p(t)?this[0].insertBefore(t,i):t instanceof y.fn.init&&t.each(function(t){return n[0].insertBefore(t,i)})},appendTo:function(t){p(t)?this.each(function(e){return t.appendChild(e)}):t instanceof y.fn.init&&this.each(function(e){return t[0].appendChild(e)})},preappendTo:function(t){var e=this;p(t)?!function(){var n=t.childNodes[0];e.each(function(e){return t.insertBefore(e,n)})}():t instanceof y.fn.init&&!function(){var n=t[0].childNodes[0];e.each(function(e){return t[0].insertBefore(e,n)})}()},text:function(t){return t===x?this[0].textContent:("undefined"==typeof t?"undefined":(0,w["default"])(t))===M?(this.each(function(e){return e.textContent=t}),this):void 0},width:function(){var t=void 0;if(this[0].getClientRects){var e=this[0].getClientRects()[0];t=e?e.width:0}return Math.max(t||0,this[0].clientWidth||0,this[0].offsetWidth||0,this[0].innerWidth||0)},height:function(){var t=void 0;if(this[0].getClientRects){var e=this[0].getClientRects()[0];t=e?e.height:0}return Math.max(t||0,this[0].clientHeight||0,this[0].offsetHeight||0,this[0].innerHeight||0)},innerWidth:function(){return this[0].clientWidth},innerHeight:function(){return this[0].clientHeight},remove:function(t){if(t===x)this.each(function(t){return t.parentNode.removeChild(t)});else{var e=t>=0?t:this.length+t;if(t>=0||t<this.length){this[e].parentNode.removeChild(this[e]),delete this[e];for(var n=e;n<this.length-1;n++)this[n+1]=this[n];delete this[this.length-1],this.length--}}},childrens:function(t){var e=this;if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===M){var n=function(){var n=[];return e.each(function(t){return n=n.concat(Array.prototype.slice.call(t.childNodes))}),{v:h(n,t)}}();if("object"===("undefined"==typeof n?"undefined":(0,w["default"])(n)))return n.v}else if(("undefined"==typeof t?"undefined":(0,w["default"])(t))===_){var r=function(){var n=y();return e.each(function(e){return n.push(e.childNodes[t])}),{v:n}}();if("object"===("undefined"==typeof r?"undefined":(0,w["default"])(r)))return r.v}else if(t===x){var i=function(){var t=y();return e.each(function(e){for(var n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n])}),{v:t}}();if("object"===("undefined"==typeof i?"undefined":(0,w["default"])(i)))return i.v}},childSelect:function(t,e,n){var r=y(t,this),i="<"+t.split(/[.#]/)[0]+">";for(n=n||{},n["class"]=t.split(".").splice(1).join(" ");r.length>e;)r.pop().remove();for(;r.length<e;)r.push(this.append(y(i,n))[0]);return r},get:function(t){var e=t>=0?t:this.length+t;return(t>=0||t<this.length)&&y(this[e])},offset:function(t){if(!t[0].contains(this[0]))throw"currentthis";for(var e=this[0],n=0,r=0;e!==t[0];)if(n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent,e!==t[0]&&e.contains(t[0]))throw"current";return[n,r]}},y.maxSelect=function(t,e,n,r){var i=y(e),a=y(t,i),o="<"+t.split(".")[0]+">";for(r=r||{},r["class"]=t.split(".").splice(1).join(" ");a.length>n;)a.pop().remove();for(;a.length<n;)a.push(i.append(y(o,r))[0]);return a},y.prototype.init.prototype=y.prototype;var E=y(O);e.$=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.iniData=void 0;var i=n(88),a=r(i),o=n(91),s=r(o),u=n(82),l=r(u),c=n(79),p=r(c),h=n(94),f=r(h),d=n(59),y=r(d),v=n(97),g=r(v),m=n(100),w=r(m),b={Empty:[],R1:[{partType:"resistance",id:"R_in",input:["10k"],position:[420,280],rotate:[[0,1],[-1,0]]}],R2:[{partType:"resistance",id:"R_1",input:["10k"],position:[420,340],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",input:["10k"],position:[700,340],rotate:[[1,0],[0,1]]}],R2W1:[{partType:"resistance",id:"R_1",input:["10k"],position:[420,340],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",input:["10k"],position:[700,240],rotate:[[1,0],[0,1]]},{partType:"line",way:[[460,340],[540,340],[540,300],[560,300],[560,240],[660,240]]}],R3W2:[{partType:"resistance",id:"R_1",input:["10k"],position:[420,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",input:["10k"],position:[640,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_3",input:["10k"],position:[860,240],rotate:[[1,0],[0,1]]},{partType:"line",way:[[460,240],[600,240]]},{partType:"line",way:[[680,240],[820,240]]}],R3W3:[{partType:"resistance",id:"R_1",input:["10k"],position:[220,340],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",input:["10k"],position:[500,340],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_3",input:["10k"],position:[500,220],rotate:[[1,0],[0,1]]},{partType:"line",way:[[460,220],[360,220],[360,340]]},{partType:"line",way:[[260,340],[360,340]]},{partType:"line",way:[[360,340],[460,340]]}],R4W4:[{partType:"resistance",id:"R_1",input:["10k"],position:[400,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",input:["10k"],position:[760,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_3",input:["10k"],position:[580,120],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_4",input:["10k"],position:[760,400],rotate:[[1,0],[0,1]]},{partType:"line",way:[[440,240],[580,240]]},{partType:"line",way:[[580,240],[720,240]]},{partType:"line",way:[[580,160],[580,240]]},{partType:"line",way:[[580,240],[580,300],[640,300],[640,360],[680,360],[680,400],[720,400]]}],R9:[{partType:"resistance",id:"R_1",input:["10k"],position:[360,60],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[200,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[300,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[400,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[500,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[600,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[700,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[800,240],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_1",input:["10k"],position:[900,240],rotate:[[1,0],[0,1]]}],Series:[{partType:"resistance",id:"R_1",position:[700,160],rotate:[[0,1],[-1,0]],text:[16,-2],input:["1k"]},{partType:"resistance",id:"R_2",position:[700,320],rotate:[[0,1],[-1,0]],text:[16,-2],input:["1k"]},{partType:"reference_ground",id:"GND_1",position:[500,420],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_R1",position:[780,160],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"dc_current_source",id:"V_1",position:[500,180],rotate:[[1,0],[0,1]],text:[20,-2],input:["10m"]},{partType:"dc_voltage_source",id:"V_2",position:[500,300],rotate:[[1,0],[0,1]],text:[20,-2],input:["12"]},{partType:"current_meter",id:"I_in",position:[600,100],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"line",way:[[700,120],[700,100]]},{partType:"line",way:[[780,200],[780,220],[700,220]]},{partType:"line",way:[[700,200],[700,220]]},{partType:"line",way:[[700,220],[700,280]]},{partType:"line",way:[[500,400],[500,380]]},{partType:"line",way:[[500,140],[500,100],[580,100]]},{partType:"line",way:[[620,100],[700,100]]},{partType:"line",way:[[700,100],[780,100],[780,120]]},{partType:"line",way:[[500,340],[500,380]]},{partType:"line",way:[[500,380],[700,380],[700,360]]},{partType:"line",way:[[500,260],[500,220]]}],Bridge:[{partType:"resistance",id:"R_1",input:["10k"],position:[460,180],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_2",input:["5k"],position:[460,380],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_3",input:["1k"],position:[560,280],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_4",input:["5k"],position:[660,180],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_5",input:["10k"],position:[660,380],rotate:[[0,1],[-1,0]]},{partType:"ac_voltage_source",id:"V_1",input:["50","50","0","0"],position:[340,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_R4",position:[760,180],rotate:[[1,0],[0,1]]},{partType:"current_meter",id:"I_R4",position:[560,100],rotate:[[1,0],[0,1]]},{partType:"reference_ground",id:"GND_1",position:[340,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[340,240],[340,100],[460,100]]},{partType:"line",way:[[660,140],[660,100]]},{partType:"line",way:[[460,100],[460,140]]},{partType:"line",way:[[340,320],[340,460]]},{partType:"line",way:[[660,420],[660,460],[460,460]]},{partType:"line",way:[[460,460],[460,420]]},{partType:"line",way:[[460,220],[460,280]]},{partType:"line",way:[[660,220],[660,280]]},{partType:"line",way:[[520,280],[460,280]]},{partType:"line",way:[[460,280],[460,340]]},{partType:"line",way:[[600,280],[660,280]]},{partType:"line",way:[[660,280],[660,340]]},{partType:"line",way:[[460,100],[540,100]]},{partType:"line",way:[[760,220],[760,280],[660,280]]},{partType:"line",way:[[340,480],[340,460]]},{partType:"line",way:[[340,460],[460,460]]},{partType:"line",way:[[580,100],[660,100]]},{partType:"line",way:[[660,100],[760,100],[760,140]]}],FirstOrderCircuitDC:[{partType:"dc_voltage_source",id:"V_1",position:[180,280],rotate:[[1,0],[0,1]],input:["10"]},{partType:"resistance",id:"R_1",position:[340,200],rotate:[[1,0],[0,1]],input:["1k"]},{partType:"capacitor",id:"C_1",position:[420,280],rotate:[[0,1],[-1,0]],input:["1u"]},{partType:"reference_ground",id:"GND_1",position:[340,400],rotate:[[1,0],[0,1]]},{partType:"line",way:[[380,200],[420,200]]},{partType:"line",way:[[180,240],[180,200],[260,200]]},{partType:"line",way:[[180,320],[180,360],[260,360]]},{partType:"line",way:[[340,380],[340,360]]},{partType:"line",way:[[340,360],[420,360]]},{partType:"line",way:[[520,240],[520,200],[420,200]]},{partType:"line",way:[[420,240],[420,200]]},{partType:"line",way:[[520,320],[520,360],[420,360]]},{partType:"line",way:[[420,320],[420,360]]},{partType:"line",way:[[260,240],[260,200]]},{partType:"line",way:[[260,200],[300,200]]},{partType:"line",way:[[260,320],[260,360]]},{partType:"line",way:[[260,360],[340,360]]},{partType:"voltage_meter",id:"V_in",position:[260,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_C1",position:[520,280],rotate:[[1,0],[0,1]]}],FirstOrderCircuitAC:[{partType:"resistance",id:"R_1",position:[340,200],rotate:[[1,0],[0,1]],input:["200"]},{partType:"capacitor",id:"C_1",position:[420,280],rotate:[[0,1],[-1,0]],input:["10u"]},{partType:"reference_ground",id:"GND_1",position:[340,400],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_in",position:[260,280],rotate:[[1,0],[0,1]]},{partType:"voltage_meter",id:"V_C1",position:[520,280],rotate:[[1,0],[0,1]]},{partType:"line",way:[[380,200],[420,200]]},{partType:"line",way:[[340,380],[340,360]]},{partType:"line",way:[[340,360],[420,360]]},{partType:"line",way:[[520,240],[520,200],[420,200]]},{partType:"line",way:[[420,240],[420,200]]},{partType:"line",way:[[520,320],[520,360],[420,360]]},{partType:"line",way:[[420,320],[420,360]]},{partType:"line",way:[[260,240],[260,200]]},{partType:"line",way:[[260,320],[260,360]]},{partType:"ac_voltage_source",id:"V_1",position:[160,280],rotate:[[1,0],[0,1]],input:["20","100","0","0"]},{partType:"line",way:[[160,240],[160,200],[260,200]]},{partType:"line",way:[[260,200],[300,200]]},{partType:"line",way:[[160,320],[160,360],[260,360]]},{partType:"line",way:[[260,360],[340,360]]}],BridgeRectifier:[{partType:"diode",id:"VD_1",position:[300,200],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_2",position:[380,200],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_3",position:[300,440],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"diode",id:"VD_4",position:[380,440],rotate:[[1,0],[0,1]],text:[18,6],input:["1","0.5","0.2G"]},{partType:"ac_voltage_source",id:"V_1",position:[180,320],rotate:[[1,0],[0,1]],text:[-38,-10],input:["220","200","0","0"]},{partType:"capacitor",id:"C_1",position:[500,320],rotate:[[0,1],[-1,0]],text:[-36,-2],input:["100u"]},{partType:"resistance",id:"R_1",position:[560,320],rotate:[[0,1],[-1,0]],text:[16,-2],input:["2k"]},{partType:"current_meter",id:"I_out",position:[440,140],rotate:[[1,0],[0,1]],text:[-12,-11]},{partType:"voltage_meter",id:"V_out",position:[640,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_in",position:[240,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_1",position:[300,540],rotate:[[1,0],[0,1]]},{partType:"line",way:[[180,280],[180,260],[240,260]]},{partType:"line",way:[[180,360],[180,380],[240,380]]},{partType:"line",way:[[300,160],[300,140],[380,140]]},{partType:"line",way:[[640,280],[640,140],[560,140]]},{partType:"line",way:[[640,360],[640,500],[560,500]]},{partType:"line",way:[[380,240],[380,380]]},{partType:"line",way:[[380,380],[380,400]]},{partType:"line",way:[[300,400],[300,260]]},{partType:"line",way:[[300,260],[300,240]]},{partType:"line",way:[[560,280],[560,140]]},{partType:"line",way:[[380,480],[380,500]]},{partType:"line",way:[[300,480],[300,500]]},{partType:"line",way:[[380,500],[500,500]]},{partType:"line",way:[[560,360],[560,500]]},{partType:"line",way:[[500,360],[500,500]]},{partType:"line",way:[[460,140],[500,140]]},{partType:"line",way:[[500,280],[500,140]]},{partType:"line",way:[[420,140],[380,140]]},{partType:"line",way:[[380,140],[380,160]]},{partType:"line",way:[[560,140],[500,140]]},{partType:"line",way:[[560,500],[500,500]]},{partType:"line",way:[[240,280],[240,260]]},{partType:"line",way:[[240,260],[300,260]]},{partType:"line",way:[[240,360],[240,380]]},{partType:"line",way:[[240,380],[380,380]]},{partType:"line",way:[[300,520],[300,500]]},{partType:"line",way:[[300,500],[380,500]]}],halfWaveRectifier:[{partType:"ac_voltage_source",id:"V_1",position:[180,220],
rotate:[[1,0],[0,1]],text:[-38,-10],input:["20","200","0","0"]},{partType:"diode",id:"VD_1",position:[280,140],rotate:[[0,1],[-1,0]],text:[-11.5,-18],input:["1","0.5","0.2G"]},{partType:"resistance",id:"R_1",position:[460,220],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["100"]},{partType:"line",way:[[180,180],[180,140],[240,140]]},{partType:"line",way:[[320,140],[380,140]]},{partType:"line",way:[[420,140],[460,140]]},{partType:"line",way:[[520,180],[520,140],[460,140]]},{partType:"line",way:[[460,140],[460,180]]},{partType:"line",way:[[180,260],[180,300],[320,300]]},{partType:"reference_ground",id:"GND_1",position:[320,340],rotate:[[1,0],[0,1]]},{partType:"line",way:[[320,320],[320,300]]},{partType:"line",way:[[320,300],[460,300]]},{partType:"line",way:[[520,260],[520,300],[460,300]]},{partType:"line",way:[[460,300],[460,260]]},{partType:"current_meter",id:"I_out",position:[400,140],rotate:[[1,0],[0,1]],text:[-12,-11]},{partType:"voltage_meter",id:"V_out",position:[520,220],rotate:[[1,0],[0,1]],text:[24,6]}],PhaseAmplifier:[{partType:"ac_voltage_source",id:"V_1",position:[260,240],rotate:[[0,1],[-1,0]],text:[-7,34],input:["10","200","0","0"]},{partType:"operational_amplifier",id:"OP_1",position:[500,220],rotate:[[1,0],[0,1]],text:[-11.5,0],input:["120","80M","40"]},{partType:"resistance",id:"R_1",position:[380,240],rotate:[[1,0],[0,1]],text:[-7,26],input:["10k"]},{partType:"reference_ground",id:"GND_1",position:[160,240],rotate:[[0,1],[-1,0]]},{partType:"voltage_meter",id:"V_in",position:[320,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[320,420],rotate:[[1,0],[0,1]]},{partType:"resistance",id:"R_2",position:[500,140],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"resistance",id:"R_3",position:[380,200],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"reference_ground",id:"GND_3",position:[300,200],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_4",position:[560,320],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["10k"]},{partType:"voltage_meter",id:"V_out",position:[620,320],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"line",way:[[180,240],[220,240]]},{partType:"line",way:[[340,240],[320,240]]},{partType:"line",way:[[460,240],[420,240]]},{partType:"line",way:[[320,280],[320,240]]},{partType:"line",way:[[320,240],[300,240]]},{partType:"line",way:[[320,400],[320,380]]},{partType:"line",way:[[340,200],[320,200]]},{partType:"line",way:[[460,200],[440,200]]},{partType:"line",way:[[460,140],[440,140],[440,200]]},{partType:"line",way:[[440,200],[420,200]]},{partType:"line",way:[[540,140],[560,140],[560,220]]},{partType:"line",way:[[560,280],[560,220]]},{partType:"line",way:[[560,220],[540,220]]},{partType:"line",way:[[560,360],[560,380]]},{partType:"line",way:[[320,380],[320,360]]},{partType:"line",way:[[620,280],[620,220],[560,220]]},{partType:"line",way:[[620,360],[620,380],[560,380]]},{partType:"line",way:[[560,380],[320,380]]}],currentAmplifier:[{partType:"dc_voltage_source",id:"V_1",position:[180,280],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["10"]},{partType:"resistance",id:"R_1",position:[300,280],rotate:[[1,0],[0,1]],text:[-7,-32],input:["10k"]},{partType:"transistor_npn",id:"Q_1",position:[480,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"reference_ground",id:"GND_1",position:[100,280],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_2",position:[500,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100"]},{partType:"line",way:[[120,280],[140,280]]},{partType:"line",way:[[220,280],[240,280]]},{partType:"line",way:[[500,360],[500,320]]},{partType:"line",way:[[420,280],[460,280]]},{partType:"line",way:[[380,280],[340,280]]},{partType:"current_meter",id:"I_in",position:[400,280],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"current_meter",id:"I_ap",position:[340,200],rotate:[[1,0],[0,1]],text:[-9.5,-11]},{partType:"line",way:[[360,200],[500,200],[500,240]]},{partType:"line",way:[[320,200],[240,200],[240,280]]},{partType:"line",way:[[240,280],[260,280]]},{partType:"reference_ground",id:"GND_2",position:[500,480],rotate:[[1,0],[0,1]]},{partType:"line",way:[[500,440],[500,460]]}],CommonEmitterAmplifier:[{partType:"config",endtime:"50m",stepsize:"10u"},{partType:"dc_voltage_source",id:"V_1",position:[220,100],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["20"]},{partType:"reference_ground",id:"GND_1",position:[140,100],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_1",position:[300,180],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100k"]},{partType:"resistance",id:"R_2",position:[300,380],rotate:[[0,1],[-1,0]],text:[16,-2],input:["100k"]},{partType:"resistance",id:"R_3",position:[400,160],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_4",position:[400,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["2k"]},{partType:"transistor_npn",id:"Q_1",position:[380,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"resistance",id:"R_5",position:[600,340],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["1M"]},{partType:"capacitor",id:"C_1",position:[500,220],rotate:[[1,0],[0,1]],text:[-7,32],input:["10n"]},{partType:"capacitor",id:"C_2",position:[240,280],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10"]},{partType:"ac_voltage_source",id:"V_2",position:[120,360],rotate:[[1,0],[0,1]],text:[-38,-10],input:["3","300","0","0"]},{partType:"voltage_meter",id:"V_in",position:[180,360],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_out",position:[660,340],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[120,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[160,100],[180,100]]},{partType:"line",way:[[260,100],[300,100]]},{partType:"line",way:[[400,120],[400,100],[300,100]]},{partType:"line",way:[[300,140],[300,100]]},{partType:"line",way:[[400,240],[400,220]]},{partType:"line",way:[[400,320],[400,360]]},{partType:"line",way:[[300,220],[300,280]]},{partType:"line",way:[[300,340],[300,280]]},{partType:"line",way:[[300,280],[360,280]]},{partType:"line",way:[[540,220],[600,220]]},{partType:"line",way:[[660,300],[660,220],[600,220]]},{partType:"line",way:[[600,220],[600,300]]},{partType:"line",way:[[460,220],[400,220]]},{partType:"line",way:[[400,220],[400,200]]},{partType:"line",way:[[280,280],[300,280]]},{partType:"line",way:[[180,320],[180,280]]},{partType:"line",way:[[120,320],[120,280],[180,280]]},{partType:"line",way:[[180,280],[200,280]]},{partType:"line",way:[[120,480],[120,460]]},{partType:"line",way:[[180,400],[180,460]]},{partType:"line",way:[[120,400],[120,460]]},{partType:"line",way:[[300,420],[300,460]]},{partType:"line",way:[[180,460],[120,460]]},{partType:"line",way:[[400,440],[400,460]]},{partType:"line",way:[[300,460],[180,460]]},{partType:"line",way:[[600,380],[600,460]]},{partType:"line",way:[[400,460],[300,460]]},{partType:"line",way:[[660,380],[660,460],[600,460]]},{partType:"line",way:[[600,460],[400,460]]}],EmitterFollower:[{partType:"config",endtime:"50m",stepsize:"2u"},{partType:"dc_voltage_source",id:"V_1",position:[220,100],rotate:[[0,1],[-1,0]],text:[-7,-36],input:["20"]},{partType:"reference_ground",id:"GND_1",position:[140,100],rotate:[[0,1],[-1,0]]},{partType:"resistance",id:"R_1",position:[300,180],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_2",position:[300,380],rotate:[[0,1],[-1,0]],text:[16,-2],input:["10k"]},{partType:"resistance",id:"R_4",position:[400,400],rotate:[[0,1],[-1,0]],text:[16,-2],input:["680"]},{partType:"transistor_npn",id:"Q_1",position:[380,280],rotate:[[1,0],[0,1]],text:[25,6],input:["40","26","0.6","1"]},{partType:"resistance",id:"R_5",position:[600,400],rotate:[[0,1],[-1,0]],text:[-30,-2],input:["100k"]},{partType:"capacitor",id:"C_1",position:[500,340],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10n"]},{partType:"capacitor",id:"C_2",position:[240,280],rotate:[[1,0],[0,1]],text:[-7,-38],input:["10"]},{partType:"ac_voltage_source",id:"V_2",position:[120,360],rotate:[[1,0],[0,1]],text:[-38,-10],input:["3","1k","0","0"]},{partType:"voltage_meter",id:"V_in",position:[180,360],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"voltage_meter",id:"V_out",position:[660,400],rotate:[[1,0],[0,1]],text:[24,6]},{partType:"reference_ground",id:"GND_2",position:[120,500],rotate:[[1,0],[0,1]]},{partType:"line",way:[[160,100],[180,100]]},{partType:"line",way:[[260,100],[300,100]]},{partType:"line",way:[[400,320],[400,340]]},{partType:"line",way:[[300,220],[300,280]]},{partType:"line",way:[[300,340],[300,280]]},{partType:"line",way:[[300,280],[360,280]]},{partType:"line",way:[[280,280],[300,280]]},{partType:"line",way:[[180,320],[180,280]]},{partType:"line",way:[[120,320],[120,280],[180,280]]},{partType:"line",way:[[180,280],[200,280]]},{partType:"line",way:[[120,480],[120,460]]},{partType:"line",way:[[180,400],[180,460]]},{partType:"line",way:[[120,400],[120,460]]},{partType:"line",way:[[300,420],[300,460]]},{partType:"line",way:[[180,460],[120,460]]},{partType:"line",way:[[400,440],[400,460]]},{partType:"line",way:[[300,460],[180,460]]},{partType:"line",way:[[600,440],[600,460]]},{partType:"line",way:[[400,460],[300,460]]},{partType:"line",way:[[660,440],[660,460],[600,460]]},{partType:"line",way:[[600,460],[400,460]]},{partType:"line",way:[[400,240],[400,100],[300,100]]},{partType:"line",way:[[300,100],[300,140]]},{partType:"line",way:[[540,340],[600,340]]},{partType:"line",way:[[660,360],[660,340],[600,340]]},{partType:"line",way:[[600,340],[600,360]]},{partType:"line",way:[[460,340],[400,340]]},{partType:"line",way:[[400,340],[400,360]]}]};Object.prototype.extend=function(t){if(!(t instanceof Object))return this;for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},Array.extend({clone:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=[],r=0;r<t.length;r++)t[r]instanceof Array?n[r]=Array.clone(t[r],e):t[r]instanceof Object?n[r]=Object.clone(t[r]):"number"==typeof t[r]?n[r]=t[r]*e:n[r]=t[r];return n}}),Array.prototype.extend({isEqual:function(t){if(!t)return!1;if(this.length!==t.length)return!1;for(var e=0;e<this.length;e++)if(this[e]!==t[e])return!1;return!0}}),Object.extend({clone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=Array.clone(t[n]):t[n]instanceof Object?e[n]=Object.clone(t[n]):e[n]=t[n]);return(0,w["default"])(e,(0,g["default"])(t)),e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},freezeAll:function(t){for(var e in t)t.hasOwnProperty(e)&&"object"===(0,y["default"])(t[e])&&Object.freezeAll(t[e]);(0,f["default"])(t)},freezeMethod:function(t){for(var e in t)t.hasOwnProperty(e)&&(0,p["default"])(t,e,{configurable:!1,writable:!1,enumerable:!1})},sealAll:function(t){for(var e in t)t.hasOwnProperty(e)&&"object"===(0,y["default"])(t[e])&&Object.sealAll(t[e]);(0,l["default"])(t)}}),Math.extend({vectorInit:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];n||(n=1);var r=[e[0]-t[0],e[1]-t[1]];return r[0]&&(r[0]=r[0]/Math.abs(r[0])*n),r[1]&&(r[1]=r[1]/Math.abs(r[1])*n),r},vectorSimilar:function(t,e){for(var n=-3e5,r=-1,i=0;i<e.length;i++)if(e[i]){var a=t[0]*e[i][0]+t[1]*e[i][1];n<a&&(n=a,r=i)}return r},maxOfArray:function(t){for(var e=-(1/0),n=0;n<t.length;n++){var r=Number(t[n]);!(0,s["default"])(r)&&r>e&&(e=r)}return e},minOfArray:function(t){for(var e=1/0,n=0;n<t.length;n++){var r=Number(t[n]);!(0,s["default"])(r)&&r<e&&(e=r)}return e},average:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/=t.length}}),Number.prototype.extend({toSFixed:function(){var t=arguments.length<=0||void 0===arguments[0]?6:arguments[0],e=Number(this.toString());if(!e)return 0;var n=e/Math.abs(e),r=e*n,i=t-1-Math.floor((0,a["default"])(r)),o=void 0;if(i>0)o=parseFloat(r.toFixed(i));else if(i<0){var s=Math.pow(10,i);o=Math.round(r/s)*s}else o=Math.round(r);return o*n},toShort:function(){var t=arguments.length<=0||void 0===arguments[0]?6:arguments[0],e=Number(this.toString());if(!e)return"0";for(var n=e/Math.abs(e),r=["m","","n","p"],i=["k","M","G"],a=-1,o=void 0,s=1,u=e*n;u<1;)if(s*=1e3,u*=1e3,a++,u>1||3===a)return o=(n*u).toSFixed(t),{rank:s,number:o,unit:r[a],txt:o+r[a]};for(;u>1e3;)if(s*=.001,u*=.001,a++,u<1e3||2===a)return o=(n*u).toSFixed(t),{rank:s,number:o,unit:i[a],txt:o+i[a]};return{rank:1,unit:"",number:e.toSFixed(t),txt:e.toSFixed(t).toString()}},rank:function(){var t=Number(this.toString());if(!t)return 0;var e=t/Math.abs(t);return Math.pow(10,Math.floor((0,a["default"])(t*e)))},powRank:function(){var t=Number(this.toString());if(!t)return 0;var e=t/Math.abs(t);return Math.floor((0,a["default"])(t*e))+1}}),String.prototype.extend({toVal:function(){var t={G:1e9,M:1e6,k:1e3,m:.001,u:1e-6,n:1e-9,p:1e-12};if(this.search(/[dD][bB]$/)!==-1)return Math.pow(10,parseFloat(this)/20);if(this.search(/^update/)!==-1)return this;var e=this.replace("","u"),n=parseFloat(e.match(/\d+(.\d+)?/)[0]),r=e.match(/[GMkmunp]/),i=r?t[r[0]]:1;return(n*i).toSFixed()}}),Object.freezeMethod(Array),Object.freezeMethod(Object),Object.freezeMethod(Object.prototype),Object.freezeMethod(Number.prototype),Object.freezeMethod(String.prototype),window.document.oncontextmenu=function(){return!1},e.iniData=b},function(t,e,n){t.exports={"default":n(89),__esModule:!0}},function(t,e,n){n(90),t.exports=n(18).Math.log10},function(t,e,n){var r=n(16);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){t.exports={"default":n(92),__esModule:!0}},function(t,e,n){n(93),t.exports=n(18).Number.isNaN},function(t,e,n){var r=n(16);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){t.exports={"default":n(95),__esModule:!0}},function(t,e,n){n(96),t.exports=n(18).Object.freeze},function(t,e,n){var r=n(24),i=n(66).onFreeze;n(85)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){t.exports={"default":n(98),__esModule:!0}},function(t,e,n){n(99),t.exports=n(18).Object.getPrototypeOf},function(t,e,n){var r=n(50),i=n(49);n(85)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){t.exports={"default":n(101),__esModule:!0}},function(t,e,n){n(102),t.exports=n(18).Object.setPrototypeOf},function(t,e,n){var r=n(16);r(r.S,"Object",{setPrototypeOf:n(103).set})},function(t,e,n){var r=n(24),i=n(23),a=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(19)(Function.call,n(75).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype={getSingleValueBySmalle:function(t){return!!this[t[0]]&&(!!this[t[0]][t[1]]&&this[t[0]][t[1]])},getSingleValueByOrigin:function(t){return this.getSingleValueBySmalle([t[0]/20,t[1]/20])},setSingleValueBySmalle:function(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this[t[0]]||(this[t[0]]=[]),n?this[t[0]][t[1]]={}:this[t[0]][t[1]]||(this[t[0]][t[1]]={});for(var r in e)e.hasOwnProperty(r)&&(this[t[0]][t[1]][r]=e[r])},setSingleValueByOrigin:function(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.setSingleValueBySmalle([t[0]/20,t[1]/20],e,n)},deleteSingleValueBySmalle:function(t){this.getSingleValueBySmalle(t)&&delete this[t[0]][t[1]],Object.isEmpty(this[t[0]])&&delete this[t[0]]},pushConnectPointBySmalle:function(t,e){var n=this.getSingleValueBySmalle(t);if(!n)return!1;n&&!n.connect&&(n.connect=[]),n=n.connect;for(var r=0;r<n.length;r++)if(n[r][0]===e[0]&&n[r][1]===e[1])return!1;return n.push(e),!0},findLinesByCrossPoint:function(t){var e=[20*Math.round(.05*t[0]),20*Math.round(.05*t[1])],n=this.getSingleValueByOrigin(e).connect,r=[[0,20],[0,-20],[20,0],[-20,0]].reduce(function(n,r){var i=Math.abs(t[0]-e[0]-n[0])+Math.abs(t[1]-e[1]-n[1]),a=Math.abs(t[0]-e[0]-r[0])+Math.abs(t[1]-e[1]-r[1]);return i<a?n:r}).map(function(t,n){return.05*(e[n]+t)});if(!n.some(function(t){return t.isEqual(r)}))return[];var i=this.getSingleValueBySmalle(r),a=void 0;if("line"===i.form||"line-point"===i.form)a=partsAll.findPartObj(i.id);else if("part-point"===i.form){var o=i.id.split("-"),s=partsAll.findPartObj(o[0]);a=partsAll.findPartObj(s.connect[parseInt(o[1])])}for(var u=this.getSingleValueByOrigin(e).id.split(" "),l=[],c=0;c<u.length;c++)u[c]!==a.id&&l.push(partsAll.findPartObj(u[c]));return[a,l]},nodeInConnectBySmall:function(t,e){var n=this.getSingleValueBySmalle(t);if(n&&("line"===n.form||"cross-point"===n.form))for(var r=0;r<n.connect.length;r++)if(n.connect[r][0]===e[0]&&n.connect[r][1]===e[1])return!0;return!1},makePartSign:function(t,e,n,r){for(var i=e[0]-r.left;i<=e[0]+r.right;i++)for(var a=e[1]-r.top;a<=e[1]+r.bottom;a++)this.setSingleValueBySmalle([i,a],{id:t,form:"part"},!0);for(var o=0;o<n.length;o++)this.setSingleValueBySmalle([e[0]+n[o][0]/20,e[1]+n[o][1]/20],{id:t+"-"+o,form:"part-point",connect:[]},!0)},deletePartSign:function(t,e,n){for(var r=t[0]-n.left;r<=t[0]+n.right;r++)for(var i=t[1]-n.top;i<=t[1]+n.bottom;i++)this.deleteSingleValueBySmalle([r,i]);for(var a=0;a<e.length;a++)this.deleteSingleValueBySmalle([t[0]+e[a][0]/20,t[1]+e[a][1]/20])},makeLineSign:function(t,e){function n(t,e,n,r){var i=t.getSingleValueBySmalle(n);i?"cross-point"!==i.form&&"part-point"!==i.form&&t.setSingleValueBySmalle(n,{id:r}):t.setSingleValueBySmalle(n,{form:"line",id:r,connect:[]}),e[0]&&(t.pushConnectPointBySmalle(n,e),t.pushConnectPointBySmalle(e,n))}for(var r=this,i=[],a=0,o=0,s=0;s<e.length-1;s++){var u=0,l=0,c=0,p=0,h=0;e[s][0]!==e[s+1][0]&&(h=1),u=e[s][h],c=e[s][1-h],p=e[s+1][1-h],l=(p-c)/Math.abs(p-c)*20;for(var f=c;f!==p;f+=l)a=((1-h)*u+h*f)/20,o=(h*u+(1-h)*f)/20,n(this,i,[a,o],t),i=[a,o]}i=[a,o],a=e[e.length-1][0]/20,o=e[e.length-1][1]/20,this.getSingleValueBySmalle([a,o])?n(this,i,[a,o],t):(n(this,i,[a,o],t),this[a][o].form="line-point"),[e[0],e[e.length-1]].forEach(function(e){var n=r.getSingleValueByOrigin(e);n&&"cross-point"===n.form&&n.id.search(t)===-1&&(n.id?n.id+=" "+t:n.id=t)})},deleteLineSign:function(t,e){function n(t,e){function n(t,e){if(!t)return!1;for(var n=0;n<t.length;n++)if(t[n][0]===e[0]&&t[n][1]===e[1])return t.splice(n,1),!0;return!1}if(t[0]){var i=r.getSingleValueBySmalle(t);i&&1===i.connect.length?("part-point"!==i.form?delete r[t[0]][t[1]]:r.setSingleValueBySmalle(t,{connect:[]}),Object.isEmpty(r[t[0]])&&delete r[t[0]]):i&&i.connect.length>1&&n(i.connect,e);var a=r.getSingleValueBySmalle(e);a&&n(a.connect,t)}}for(var r=this,i=[],a=0,o=0,s=0;s<e.length-1;s++){var u=0,l=0,c=0,p=0,h=0;e[s][0]!==e[s+1][0]&&(h=1),u=e[s][h],c=e[s][1-h],p=e[s+1][1-h],l=(p-c)/Math.abs(p-c)*20;for(var f=c;f!==p;f+=l)a=((1-h)*u+h*f)/20,o=(h*u+(1-h)*f)/20,n(i,[a,o]),i=[a,o]}a=e[e.length-1][0]/20,o=e[e.length-1][1]/20,n(i,[a,o]),"line-point"===r.getSingleValueBySmalle([a,o]).form&&(delete r[a][o],Object.isEmpty(r[a])&&delete r[a]);var d=t;[e[0],e[e.length-1]].forEach(function(t){var e=r.getSingleValueByOrigin(t);e&&"cross-point"===e.form&&(e.id=e.id.split(" ").filter(function(t){return t!==d}).join(" "))})},nodeRound:function(t,e,n){for(var r=[],i=0;!r.length;){for(var a=0;a<=i;a++)for(var o=t[0]-20*i;o<=t[0]+20*i;o+=20){for(var s=t[1]-20*i;s<=t[1]+20*i;s+=20)Math.abs(o-t[0])+Math.abs(s-t[1])===20*(a+i)&&(n([o,s],this)||r.push([o,s]));if(r.length)break}i++}var u=[e[0]-t[0],e[1]-t[1]],l=r.map(function(e){return[e[0]-t[0],e[1]-t[1]]});return r[Math.vectorSimilar(u,l)]},isLine:function(t){var e=arguments.length<=1||void 0===arguments[1]?"origin":arguments[1],n="origin"===e?this.getSingleValueByOrigin(t):this.getSingleValueBySmalle(t);return n&&"line"===n.form||"cross-node"===n.form},isPart:function(t){var e=arguments.length<=1||void 0===arguments[1]?"origin":arguments[1],n="origin"===e?this.getSingleValueByOrigin(t):this.getSingleValueBySmalle(t);return n&&"part"===n.form||"part-point"===n.form},isPartNotPoint:function(t){var e=arguments.length<=1||void 0===arguments[1]?"origin":arguments[1],n="origin"===e?this.getSingleValueByOrigin(t):this.getSingleValueBySmalle(t);return n&&"part"===n.form},alongTheLineBySmall:function(t,e,n){n[0]?n[0]/=Math.abs(n[0]):n[1]/=Math.abs(n[1]);for(var r=[t[0],t[1]],i=!0,a=this.getSingleValueBySmalle(r);a&&(r[0]!==e[0]||r[1]!==e[1])&&("line"===a.form||"cross-point"===a.form)&&i;){var o=[r[0]+n[0],r[1]+n[1]];i=this.nodeInConnectBySmall(r,o),r=o,a=this.getSingleValueBySmalle(r)}return r[0]===t[0]&&r[1]===t[1]?r:!a||"line"!==a.form&&"cross-point"!==a.form?[r[0]-n[0],r[1]-n[1]]:r},getLineBySmall:function(t){for(var e=[],n=[],r=[[0,1],[0,-1],[1,0],[-1,0]],i=0;i<4;i++)e[i]=this.alongTheLineBySmall(t,[3e3,3e3],r[i]);for(var a=0;a<2;a++)e[2*a].isEqual(e[2*a+1])||n.push([e[2*a],e[2*a+1]]);return n}};var r=new n;e.MapHash=n,e.schMap=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){this[0]=t[0],this[1]=t[1],this.length=2,(0,u["default"])(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var a=n(100),o=r(a),s=n(82),u=r(s);i.extend({isPoint:function(t){return t instanceof i||2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]},isSegment:function(t){return 2===t.length&&i.isPoint(t[0])&&i.isPoint(t[1])},isPolyline:function(t){for(var e=0;e<t.length;e++)if(!i.isSegment(t[e]))return!1;return!0}}),i.prototype={add:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments[1],n=[],r=void 0===e?1:t,a=void 0===e?t:e;if("number"==typeof a)for(var o=0;o<this.length;o++)n[o]=this[o]+a*r;else if(a.length)for(var s=0;s<this.length;s++)a[s]?n[s]=this[s]+a[s]*r:n[s]=this[s];else n[0]=this[0],n[1]=this[1];return new i(n)},mul:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments[1],n=[],r=void 0===e?1:t,a=void 0===e?t:e;if("number"==typeof a){a=r===-1?1/a:a;for(var o=0;o<this.length;o++)n[o]=this[o]*a}else if(a.length)for(var s=0;s<this.length;s++)if(a[s]){var u=r===-1?1/a[s]:a[s];n[s]=this[s]*u}else n[s]=this[s];else n[0]=this[0],n[1]=this[1];return new i(n)},isStandarNode:function(){return 2===this.length&&this[0]===Math.floor(this[0])&&this[1]===Math.floor(this[1])},distance:function(t){var e=0;if(i.isPoint(t))for(var n=0;n<2;n++)e+=this[n]-t[n];else i.isSegment(t)||i.isPolyline(t);return e},round:function(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];return new i([Math.round(this[0]/t)*t,Math.round(this[1]/t)*t])},roundToSmall:function(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];return new i([Math.round(this[0]/t),Math.round(this[1]/t)])},floor:function(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];return new i([Math.floor(this[0]/t)*t,Math.floor(this[1]/t)*t])},floorToSmall:function(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];return new i([Math.floor(this[0]/t),Math.floor(this[1]/t)])},toGrid:function(){return[new i(this),new i([this[0]+20,this[1]]),new i([this[0],this[1]+20]),new i([this[0]+20,this[1]+20])]}},(0,o["default"])(i.prototype,Array.prototype),e.Point=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n={};return n.vector=[t.vector[0]*e[0][0]+t.vector[1]*e[1][0],t.vector[0]*e[0][1]+t.vector[1]*e[1][1]],n.point=[t.point[0]+n.vector[0],t.point[1]+n.vector[1]],n}function a(t){var e=(0,_.$)(t.tag,A,t.attribute);if(t.child)for(var n=0;n<t.child.length;n++)e.append(a(t.child[n]));return e}function o(t,e){var n=[],r=[],i=14,a={"class":"line-rect"};return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),n[0]===r[0]?(a.x=n[0]-i/2,a.y=n[1]-i/2,a.height=r[1]-n[1]+i,a.width=i):(a.x=n[0]-i/2,a.y=n[1]-i/2,a.height=i,a.width=r[0]-n[0]+i),a}function s(t,e){if(2!==t.length)throw"";if(e[0].length){if(2===e.length&&2===e[0].length&&"number"==typeof e[0][0]){if(e[0][0]===e[1][0]){if(t[1]<=e[0][1]&&t[1]>=e[1][1]||t[1]>=e[0][1]&&t[1]<=e[1][1])return Math.abs(t[0]-e[0][0])}else if(t[0]<=e[0][0]&&t[0]>=e[1][0]||t[0]>=e[0][0]&&t[0]<=e[1][0])return Math.abs(t[1]-e[0][1]);return Math.min(Math.sqrt((e[0][0]-t[0])*(e[0][0]-t[0])+(e[0][1]-t[1])*(e[0][1]-t[1])),Math.sqrt((e[1][0]-t[0])*(e[1][0]-t[0])+(e[1][1]-t[1])*(e[1][1]-t[1])))}for(var n=[],r=0;r<e.length;r++)n.push(s(t,e[r]));return Math.minOfArray(n)}for(var i=0,a=0;a<2;a++)i+=Math.abs(t[a]-e[a]);return i}function u(){}function l(t,e,n){function r(t){return t.point.isEqual(w)}function i(t){return c(t.point,S)}function a(t){return t.junction-t.junStatus?t.point.isEqual(w)||p(t,S):c(t.point,S)}function o(t){return 3*(Math.abs(t.point[0]-w[0])+Math.abs(t.point[1]-w[1]))+3*t.junction+(Math.abs(t.point[0]-m[0])+Math.abs(t.point[1]-m[1]))}function s(t){for(var e=t.point,n=1/0,r=0;r<S.length;r++){var i=S[r],a=Number(i[0][1]!==i[1][1]);n=e[a]<=i[0][a]&&e[a]>=i[1][a]||e[a]>=i[0][a]&&e[a]<=i[1][a]?Math.min(n,Math.abs(e[1-a]-i[0][1-a])):Math.min(n,Math.abs(e[0]-i[0][0])+Math.abs(e[1]-i[0][1]),Math.abs(e[0]-i[1][0])+Math.abs(e[1]-i[1][1]))}return 3*n+3*t.junction+(Math.abs(e[0]-m[0])+Math.abs(e[1]-m[1]))}function u(t){return t[0].length||!b.isLine(t,"small")?[]:b.getLineBySmall(t)}function l(t){return b.isPartNotPoint(t,"small")?b.getSingleValueBySmalle(t).id:""}function c(t,e){for(var n=t.point?t.point:t,r=0;r<e.length;r++)for(var i=e[r],a=0;a<2;a++){var o=1-a;if(i[0][a]===i[1][a]&&n[a]===i[0][a]&&(n[o]>=i[0][o]&&n[0]<=i[1][o]||n[o]<=i[0][o]&&n[0]>=i[1][o]))return!0}return!1}function p(t,e){for(var n=t.point?t.point:t,r=0;r<e.length;r++)for(var i=e[r],a=0;a<2;a++){var o=1-a;if(i[0][a]===i[1][a]&&n[a]===i[0][a]&&(n[o]>=i[0][o]&&n[0]<=i[1][o]||n[o]<=i[0][o]&&n[0]>=i[1][o])){var s=[i[0][0]-i[1][0],i[0][1]-i[1][1]];if(s[0]*t.vector[0]+s[1]*t.vector[1]!==0)return!0}}return!1}function f(t,e){if(!b.isLine(t)||!b.isLine(e))return!1;for(var n=b.getSingleValueBySmalle(e).connect,r=0;r<n.length;r++)if(t.isEqual(n[r]))return!0;return!1}function d(t){var e=b.getSingleValueBySmalle(t);return!e||"part"!==e.form||T.indexOf(e.id)!==-1}function y(t){var e=b.getSingleValueBySmalle(t);return!e||"part-point"!==e.form||T.indexOf(e.id.split("-")[0])!==-1}function v(t,e){var n=b.getSingleValueBySmalle(t);return!(!n||"part-point"!==n.form)&&(t[0]!==e[0]||t[1]!==e[1])}function g(t,e){var n=b.getSingleValueBySmalle(t);return!(!n||"part-point"!==n.form)&&Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])>1}var m=t.mul(.05),w=Array.clone(e,.05),b=k.schMap,x="small",T="",M=[],S=[];switch(n){case 1:T=l(w),S=u(w),this.checkPoint=function(t,e){return!f(t,e)&&d(t)&&!g(t,w)};break;case 2:T=l(m)+l(w),M=u(m),S=u(w),this.checkPoint=function(t,e){return!f(t,e)&&d(t)&&!v(t,w)};break;case 3:T=l(m),M=u(m),S=[w],this.checkPoint=function(t,e){return b.isLine(t,x)&&!c(t,M)?!f(t,e):b.isPartNotPoint(t,x)?d(t):!b.isPart(t,x)||y(t)}}if(e[0].length){if(!e.every(function(t){return O.Point.prototype.isStandarNode.call(t)}))throw"";if(c(m,S))return new h([t]);this.calValue=s,this.checkEnd=i}else{if(!e.isStandarNode())throw"";if(m.isEqual(w))return new h([t]);this.calValue=o,k.schMap.isLine(e)?this.checkEnd=a:this.checkEnd=r}this.expandNumber=function(t){return b.isLine(t)?this.nodeInLine(t,M)?3:1:3}}function c(t,e,n){var r=t.mul(.05),i=0;this.map=n,this[i]=[],this[i][0]={point:r,junction:0,value:i,parent:!1,junStatus:0,vector:e},this.map.setValue(r,this[i][0]),this.size=0,(0,S["default"])(this,{size:{configurable:!1,enumerable:!1},map:{configurable:!1,enumerable:!1}})}function p(t,e,n,r){var a=new u,o=new l(t,e,r),s=new c(t,n,a);if(o instanceof h)return o;s[0][0].value=o.calValue(s[0][0]);for(var p=!1,f=void 0;!p&&s.size<1e3;){var d=s.pop(),y=o.expandNumber(d.point),v=!1;MapTest.addPoint(d.point,"#2196F3",20);for(var g=0;g<y;g++){var m=i(d,V[g]);if(MapTest.addPoint(m.point,"#000000",20),o.checkPoint(m.point,d.point)){if(m.junction=d.junction+Number(!!g),m.parent=d,m.value=o.calValue(m),s.push(m),m.junStatus=v?d.junStatus:m.junction,o.checkEnd(m)){f=m,p=!0;break}}else g||(v=!0)}if(Object.isEmpty(s))return[]}MapTest.clear();var w=new h,b=f.junction;for(w.push(Array.clone(f.point,20));f.parent;)f.junction<b&&(w.push(Array.clone(f.point,20)),b=f.junction),f=f.parent;return w.push(Array.clone(t)),w.reverse(),w}function h(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.push(new O.Point(t[e]));else if("number"==typeof t)return new Array(t)}function f(t){if(t instanceof Array){this.size=t.length;for(var e=0;e<t.length;e++){var n=(0,b["default"])(t[e],2),r=n[0],i=n[1];this.set(r,i)}}else this.size=0;Object.defineProperty(this,"size",{enumerable:!1,configurable:!1})}function d(t,e){var n=void 0;this.way=new h,this.position=[0,0],this.circle=[!1,!1],this.connect=["",""],this.partType="line",this.id=P.partsAll.newId(this.partType+"_");var r={tag:"<g>",attribute:{"class":"line",id:this.id,transform:"translate(0,0)"},child:[{tag:"<path>"}]},i={tag:"<g>",attribute:{"class":"line-point draw-open",transform:"translate(0,0)"},child:[{tag:"<circle>"},{tag:"<rect>",attribute:{"class":"line-point"}}]};this.elementDOM=a(r);for(var o=0;o<2;o++)this.circle[o]=a(i),this.elementDOM.append(this.circle[o]);if(t.elementDOM&&void 0!==e){var s=t.pointRotate(),u=Array.clone(j[s[1][e]]);n=new O.Point([t.position[0]+s[0][e][0],t.position[1]+s[0][e][1]]),this.setConnect(0,t.id+"-"+e),t.connectPoint(e,this.id),this.current={startNode:n,initTrend:u,mouseRound:new f,enforceAlign:{flag:!1,onPart:!1,part:!1,label:!1}}}else n=t,this.current={};this.way.push(new O.Point(n)),this.circle[0].attr("transform","translate("+n.join(",")+")"),this.toGoing(),(0,S["default"])(this,{way:{configurable:!1,writable:!1},position:{configurable:!1,writable:!1},circle:{configurable:!1,writable:!1},connect:{configurable:!1,writable:!1},partType:{configurable:!1,writable:!1}}),(0,m["default"])(this),P.partsAll.push(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineClass=void 0;var y=n(59),v=r(y),g=n(82),m=r(g),w=n(2),b=r(w),x=n(100),T=r(x),M=n(107),S=r(M),_=n(86),O=n(105),k=n(104),P=n(110),A="http://www.w3.org/2000/svg",C=(0,_.$)("#area-of-parts"),j=[[0,-1],[-1,0],[0,1],[1,0]],V=[[[1,0],[0,1]],[[0,1],[-1,0]],[[0,-1],[1,0]],[[-1,0],[0,-1]]];Object.freezeAll(j),u.prototype={constructor:u,length:0,setValue:function(t,e){this[t[0]]||(this[t[0]]=[]),this[t[0]][t[1]]=e},getValue:function(t){return!(!this[t[0]]||!this[t[0]][t[1]])&&this[t[0]][t[1]]}},c.prototype={constructor:c,length:0,pop:function(){for(var t in this)if(this.hasOwnProperty(t)){var e=this[t].pop();return this[t].length||delete this[t],this.size--,e}},push:function(t){var e=!0,n=this.map.getValue(t.point);if(n)if(t.value>n.value)e=!1;else if(this[n.value])for(var r=0;r<this[n.value].length;r++)if(n===this[n.value][r]){this[n.value].splice(r,1),this[n.value].length||delete this[n.value];break}e&&(this[t.value]||(this[t.value]=[]),this[t.value].push(t),this.map.setValue(t.point,t),this.size++)}},h.prototype={constructor:h,length:0,checkWayRepeat:function(){for(var t=0;t<this.length-2;t++)(this[t][0]===this[t+1][0]&&this[t+1][0]===this[t+2][0]||this[t][1]===this[t+1][1]&&this[t+1][1]===this[t+2][1]||this[t][0]===this[t+1][0]&&this[t][1]==this[t+1][1])&&(this.splice(t+1,1),t-=2,t<-1&&(t=-1))},push:function(t){return this[this.length++]=new O.Point(t),this.length},unshift:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.length,i=this.length-1;i>=0;i--)this[i+r]=this[i];for(var a=0;a<r;a++)this[a]=new O.Point(e[a]);return this.length=this.length+r,this.length},checkWayExcess:function(t,e){if(this.length<=3)return!0;t.isEqual(Math.vectorInit(this[1],this[2]))&&(this.insert(p(this[0],this[2],t,e),0,3),this.checkWayRepeat());for(var n=0;n<this.length-3;n++){var r=[Math.vectorInit(this[n],this[n+1]),Math.vectorInit(this[n+2],this[n+3])];r[0].isEqual(r[1])?(this.insert(p(this[n+1],this[n+3],r[0],e),n+1,3),this.checkWayRepeat()):(this.insert(p(this[n],this[n+3],r[0],e),n,4),this.checkWayRepeat())}this.checkWayRepeat()},insert:function(t,e){
var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];this.splice(e,n);for(var r=0;r<t.length;r++)this.splice(e+r,0,t[r])},cloneWay:function(t){if(!t.length)throw"";for(var e=0;e<t.length;e++)this[e]=new O.Point(t[e]);this.splice(t.length),this.length=t.length},isSame:function(t){for(var e=0;e<this.length;e++)if(!this[e].isEqual(t[e]))return!1;return!0},standardize:function(){for(var t=0;t<this.length;t++)this[t]=this[t].round()},nodeInWay:function(t){for(var e=3e4,n=void 0,r=0;r<this.length-1;r++){var i=schematic.nodeToSegment(t,[this[r],this[r+1]]);i<e&&(e=i,n=r)}return e<11&&n},endExpand:function(t,e,n){var r=this;if(k.schMap.isLine(e))return[];var i=[];if(this.length>1)for(var a=Math.vectorInit(this[this.length-2],this[this.length-1],20),o=n.isEqual(Math.vectorInit(this[0],this[1]))?this.length-2:this.length-1,s=function(e){if(o&&(1===e||2===e))return"continue";var n=[r[r.length-1][0]+a[0]*V[e][0][0]+a[1]*V[e][1][0],r[r.length-1][1]+a[0]*V[e][0][1]+a[1]*V[e][1][1]];if(k.schMap.isLine(n))return"continue";if(t.some(function(t){return t.isEqual(n)})){var s=new h(r);s.push(n),s.checkWayRepeat(),i.push([n,s])}},u=0;u<4;u++){s(u)}return i},startExpand:function(t,e,n){for(var r=new h(Array.clone(this).reverse()),i=n.mul(-1),a=r.endExpand(t,e,i),o=0;o<a.length;o++)a[o][1].reverse();return a},len:function(){for(var t=0,e=0;e<this.length-1;e++)t+=Math.abs(this[e][0]-this[e+1][0])+Math.abs(this[e][1]-this[e+1][1]);return t},searchNodeSub:function(t){if(2===this.length)return 1;for(var e=new Array(2),n=0;n<2;n++)for(var r=0;r<this.length-1;r++)if(this[r][n]===this[r+1][n]){var i=1-n;(this[r][i]<t[i]&&this[r+1][i]>t[i]||this[r][i]>t[i]&&this[r+1][i]<t[i])&&(e[n]=r)}if("undefined"==typeof e[0]&&"undefined"==typeof e[1]){var a=[this[0],this[this.length-1]];return s(a[0],t)<s(a[1],t)?0:this.length-1}return Math.maxOfArray(e)}},(0,T["default"])(h.prototype,Array.prototype),f.extend({checkKeyError:function(t){if(!(t instanceof Array&&2===t.length))throw"2";if(Math.floor(.05*t[0])!==.05*t[0]||Math.floor(.05*t[1])!==.05*t[1])throw"20"},checkValueError:function(t){if(!(t instanceof h))throw""},keyToHash:function(t){return 5*t[0]+.05*t[1]},hashToKey:function(t){if(parseInt(t)!==parseFloat(t))throw"Hash";var e=[],n=t%100;return e[1]=20*n,e[0]=.2*(t-n),e}}),f.prototype={constructor:f,length:0,get:function(t){return f.checkKeyError(t),this[f.keyToHash(t)]},set:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?"default":arguments[2];f.checkKeyError(t),f.checkValueError(e);var r=f.keyToHash(t);this[r]?"default"===n?this[r]=e:"small"===n&&this[r].length>e.length&&(this[r]=e):(this[r]=e,this.size+=1)},has:function(t){return!!this.get(t)},forEach:function(t){for(var e in this)this.hasOwnProperty(e)&&t(f.hashToKey(e),this[e],this)},reduce:function(t){var e=[],n=[];for(var r in this)this.hasOwnProperty(r)&&(e.push(f.hashToKey(r)),n.push(r));if(!e.length)return!1;for(var i=[e[0],this[n[0]]],a=1;a<e.length;a++)i=t(i,[e[a],this[n[a]]]);return i}},d.prototype={constructor:d,length:0,toGoing:function(){for(var t=(0,_.$)("path",this.elementDOM);t.length>1;)t.pop().remove();(0,_.$)("rect.line-rect",this.elementDOM).remove(),C.preappend(this.elementDOM)},getConnectStatus:function(t){var e=this.connect[t];return e.search(" ")!==-1?"line":e.search("-")!==-1&&"part"},moveCircle:function(t,e){this.circle[t].attr("transform","translate("+e.join(",")+")")},wayDrawing:function(){if(this.way.length<1)throw"";for(var t="M"+this.way[0][0]+","+this.way[0][1],e=1;e<this.way.length;e++)t+="L"+this.way[e][0]+","+this.way[e][1];(0,_.$)("path",this.elementDOM).attr("d",t),this.moveCircle(0,this.way[0]),this.moveCircle(1,this.way[this.way.length-1])},render:function(){var t=this.elementDOM,e=(0,_.$)("path",t),n=(0,_.$)("rect.line-rect",t),r=this.way;if(this.position[0]||this.position[1]){for(var i=0;i<r.length;i--)r[i][0]-=this.position[0],r[i][1]-=this.position[1];this.position=[0,0],this.elementDOM.attr("transform","translate(0,0)")}for(r.checkWayRepeat(),this.current={};e.length>this.way.length-1;)e.remove(-1);for(;n.length>this.way.length-1;)n.remove(-1);for(var a=0;a<r.length-1;a++)e[a]?e.get(a).attr("d","M"+r[a][0]+","+r[a][1]+"L"+r[a+1][0]+","+r[a+1][1]):t.append((0,_.$)("<path>",A,{d:"M"+r[a][0]+","+r[a][1]+"L"+r[a+1][0]+","+r[a+1][1]}));for(var s=0;s<r.length-1;s++)n[s]?n.get(s).attr(o(r[s],r[s+1])):t.append((0,_.$)("<rect>",A,o(r[s],r[s+1])));this.resetCircle(0),this.resetCircle(1)},deleteConnect:function(t){this.connect.forEach(function(e,n,r){e.search(t)!==-1&&(r[n]=e.split(" ").filter(function(e){return e!==t}).join(" "))})},replaceConnect:function(t,e){var n=this.connect[t];if(n.search("-")!==-1){var r=n.split("-"),i=P.partsAll.findPartObj(r[0]),a=parseInt(r[1]);i.connectPoint(a,e)}else{for(var o=n.split(" ").map(function(t){return P.partsAll.findPartObj(t)}),s=0;s<o.length;s++)o[s].connect[0]=o[s].connect[0].replace(this.id,e),o[s].connect[1]=o[s].connect[1].replace(this.id,e);var u=this.way[t*(this.way.length-1)],l=k.schMap.getSingleValueByOrigin(u);l.id=l.id.replace(this.id,e)}},reversal:function(){this.way.reverse(),this.connect.reverse(),this.circle.reverse()},setConnect:function(t,e){this.connect[t]=e,e.search(" ")===-1?this.circle[t].attr("class","line-point draw-close"):this.circle[t].attr("class","line-point cross-point")},shrinkCircle:function(t){(0,_.$)("circle",this.circle[t]).attr("style","r:4")},enlargeCircle:function(t){(0,_.$)("circle",this.circle[t]).attr("style","r:8")},resetCircle:function(t){this.elementDOM.append(this.circle[t]),this.moveCircle(t,this.way[t*(this.way.length-1)]),(0,_.$)("circle",this.circle[t]).attr("style","")},drawCircle:function(t){this.connect[1]="",this.circle[t].attr("class","line-point draw-open"),(0,_.$)("circle",this.circle[t]).attr("style","r:8")},focusOnly:function(){this.toStatus("focus"),P.partsNow.push(this)},toStatus:function(t){"focus"===t?this.elementDOM.addClass("focus"):"normal"===t&&this.elementDOM.removeClass("focus")},findConnect:function(t){return t[0]===this.way[0][0]&&t[1]===this.way[0][1]?0:t[0]===this.way[this.way.length-1][0]&&t[1]===this.way[this.way.length-1][1]?1:-1},splitLine:function(t,e){var n=Array.clone(this.way[e*(this.way.length-1)]),r=new d(n);t.replaceConnect(1,r.id),r.setConnect(1,t.connect[1]),r.setConnect(0,t.id+" "+this.id),this.setConnect(1,t.id+" "+r.id),t.setConnect(1,r.id+" "+this.id);for(var i=0,a=0;a<t.way.length-1;a++)if(n[0]===t.way[a][0]&&n[0]===t.way[a+1][0]){if(n[1]<=t.way[a][1]&&n[1]>=t.way[a+1][1]||n[1]>=t.way[a][1]&&n[1]<=t.way[a+1][1]){i=a;break}}else if(n[1]===t.way[a][1]&&n[1]===t.way[a+1][1]&&(n[0]<=t.way[a][0]&&n[0]>=t.way[a+1][0]||n[0]>=t.way[a][0]&&n[0]<=t.way[a+1][0])){i=a;break}r.way.cloneWay(t.way.slice(i+1)),r.way.unshift(n),t.way.splice(i+1,t.way.length-i-1),t.way.push(n),this.elementDOM.preappendTo((0,_.$)("#area-of-parts")),t.render(),t.markSign(),t.focusOnly(),r.render(),r.markSign(),r.focusOnly(),k.schMap.setSingleValueByOrigin(n,{form:"cross-point",id:this.id+" "+t.id+" "+r.id}),r.markSign()},deleteSelf:function(){for(var t=this,e=0;e<this.connect.length;e++)if("line"===this.getConnectStatus(e)){var n=this.connect[e].split(" ").map(function(t){return P.partsAll.findPartObj(t)});n.forEach(function(e){return e.deleteConnect(t.id)}),2===n.length&&n[0].mergeLine(n[1])}else if("part"===this.getConnectStatus(e)){var r=this.connect[e].split("-"),i=P.partsAll.findPartObj(r[0]);i.connect[r[1]]=!1,i.noConnectPoint(r[1])}this.way.standardize(),this.deleteSign(),this.elementDOM.remove(),P.partsAll.deletePart(this)},setPath:function(t){var e=this,n=this.current.gridL,r=this.current.enforceAlign,i=this.current.mouseBias(t),a=this.current.mouse(t),o=a.round(),u=a.floor(),l=k.schMap.getSingleValueByOrigin(o),c="cross-point"===l.form||"line-point"===l.form,h="line"===l.form;(r.flag||u[0]!==n[0]||u[1]!==n[1])&&!function(){var t=r.part,o=r.label,l=e.current.startNode,c=e.current.initTrend,h=u.toGrid();r.label=!1,r.flag=!1,r.onPart&&!function(){var n=t.pointRotate()[0],s=a.add(i).add(-1,t.position);t.connect.forEach(function(t,e){t&&(n[e]=!1)});var u=Math.vectorSimilar(s,n);if(u!==-1){var h=t.position.add(n[u]),f=p(l,h,c,1);r.label=t.id+"-"+u,f.checkWayRepeat(),f.checkWayExcess(c,2),e.way.cloneWay(f),e.shrinkCircle(1),t.enlargePoint(u)}if(o&&o!==r.label){var d=o.split("-");P.partsAll.findPartObj(d[0]).shrinkPoint(d[1])}}(),r.label||!function(){var t=e.current.mouseRound,n=e.current.mouseRound=new f,r=h.reduce(function(t,e){return s(t,l)>s(e,l)?t:e});if(h.forEach(function(e){var r=t.get(e);if(r){var i=r.endExpand(h,e,c);n.set(e,r);for(var a=0;a<i.length;a++)n.set(i[a][0],i[a][1],"small")}}),r){var i=p(l,r,c,1);i.checkWayExcess(c,2),n.set(r,i);for(var a=i.endExpand(h,r,c),u=0;u<a.length;u++)n.set(a[u][0],a[u][1],"small")}if(h.forEach(function(t){var e=n.get(t);if(!e){e=p(l,t,c,1),e.checkWayExcess(c,2),n.set(t,e);for(var r=e.endExpand(h,t,c),i=0;i<r.length;i++)n.set(r[i][0],r[i][1],"small")}}),o){var d=o.split("-");P.partsAll.findPartObj(d[0]).shrinkPoint(d[1]),e.enlargeCircle(1),e.current.enforceAlign={flag:!1,onPart:!1,part:!1,label:!1}}}(),n[0]=20*Math.floor(a[0]/20),n[1]=20*Math.floor(a[1]/20)}(),this.current.enforceAlign.label||!function(){var t=e.current.mouseRound;if(c)e.way.cloneWay(t.get(o)),e.shrinkCircle(1);else if(h){var n=l.connect.map(function(t){return[20*t[0],20*t[1]]}).filter(function(e){return t.has(e)});if(n.length){var r=n.reduce(function(t,e){return s(t,a)>s(e,a)?t:e}),i=t.get(o),u=t.get(r);if(i.isSame(u))e.way.cloneWay(i);else{var p=o.add(-1,r),f=i[i.length-2].add(-1,u[u.length-2]);p.isEqual(f)?(i.length>u.length?e.way.cloneWay(i):e.way.cloneWay(u),e.way[e.way.length-1][0]===e.way[e.way.length-2][0]?(e.way[e.way.length-1][0]=a[0],e.way[e.way.length-2][0]=a[0],e.way[e.way.length-1][1]=o[1]):(e.way[e.way.length-1][1]=a[1],e.way[e.way.length-2][1]=a[1],e.way[e.way.length-1][0]=o[0])):e.way.cloneWay(i)}}else e.way.cloneWay(t.get(o));e.shrinkCircle(1)}else{var d=e.current.mouseRound.reduce(function(t,e){return t[1].length>e[1].length?t:e}),y=(0,b["default"])(d,2),v=y[1];e.way.cloneWay(v),e.way.length>1&&(e.way[e.way.length-1][0]===e.way[e.way.length-2][0]?e.way[e.way.length-2][0]=a[0]:e.way[e.way.length-2][1]=a[1]),e.way[e.way.length-1]=a,e.enlargeCircle(1)}}(),this.current.oldStatus&&this.way[this.way.length-1].isEqual(this.current.oldStatus.oldNode)&&this.way.cloneWay(this.current.oldStatus.oldWay),this.wayDrawing()},drawLineEnd:function(){var t=Array.clone(this.way[this.way.length-1]);this.way.standardize();var e=Array.clone(this.way[this.way.length-1]);if(e.isEqual(this.way[0]))return this.deleteSelf(),!1;var n=k.schMap.getSingleValueByOrigin(e);switch(n.form){case"part-point":var r=n.id.split("-"),i=P.partsAll.findPartObj(r[0]),a=parseInt(r[1]);i.connect[a]||(i.shrinkPoint(a),i.connectPoint(a,this.id),i.toStatus("focus"),this.setConnect(1,i.id+"-"+a),P.partsNow.push(i));break;case"line-point":var o=P.partsAll.findPartObj(n.id);return this.mergeLine(o),!0;case"line":var s=P.partsAll.findPartObj(n.id);this.splitLine(s,1);break;case"cross-point":for(var u=k.schMap.getSingleValueByOrigin(e).id.split(" ").map(function(t){return P.partsAll.findPartObj(t)}),l=0;l<u.length;l++){var c=void 0;c=e.isEqual(u[l].way[0])?0:1,u[l].setConnect(c,u[l].connect[c]+" "+this.id)}this.setConnect(1,n.id);break;default:if(!this.connect[0])return this.deleteSelf(),!1;var h=new O.Point(k.schMap.nodeRound(e,t,k.schMap.getSingleValueByOrigin.bind(k.schMap))),f=p(this.way[0],h,this.current.initTrend,1);f.checkWayExcess(this.current.initTrend,2),this.way.cloneWay(f)}this.current={},this.render(),this.markSign()},reDraw:function(t,e,n){var r=this.current.SVG,i=this.current.zoom,a=[20*Math.round((t.pageX-r[0])/i/20),20*Math.round((t.pageY-r[1])/i/20)];if(this.toGoing(),this.deleteSign(this.current.map),a.isEqual(this.way[0])&&this.reversal(),this.drawCircle(1),this.current.extend({startNode:Array.clone(this.way[0]),mouseRound:new f,enforceAlign:{flag:!1,onPart:!1,part:!1,label:!1}}),void 0!==e){if(e instanceof Array)for(var o=0;o<e.length;o++)e[o].deleteConnect(this.id);else e.noConnectPoint(n);this.current.oldStatus={oldNode:Array.clone(a),oldWay:Array.clone(this.way)}}var s=k.schMap.getSingleValueByOrigin(this.way[0]);if(s&&"part-point"===s.form){var u=s.id.split("-"),l=P.partsAll.findPartObj(u[0]),c=parseInt(u[1]),p=l.pointRotate();this.current.initTrend=j[p[1][c]]}else this.current.initTrend=Math.vectorInit(this.way[0],this.way[1]);this.focusOnly(),this.shrinkCircle(1),this.wayDrawing()},preMoveLine:function(t){t.isEqual(this.way[this.way.length-1])&&this.reversal();var e=this.way.map(function(t){return t[0]}),n=this.way.map(function(t){return t[1]});this.toGoing(),this.deleteSign(),this.toStatus("focus"),this.wayDrawing(),this.current={pathBackup:new h(this.way),startRound:new f,startNode:new O.Point(t),gridL:[],wayNow:[],circle:[],wayRange:{maxX:Math.maxOfArray(e),minX:Math.minOfArray(e),maxY:Math.maxOfArray(n),minY:Math.minOfArray(n)}},"line"===this.getConnectStatus(1)&&(this.moveCircle(0,this.way[0]),this.moveCircle(1,this.way[this.way.length-1]),this.current.circle=this.collectCircle(1)),Object.freezeAll(this.current.pathBackup),Object.freezeAll(this.current.wayRange)},moveToLine:function(){var t=this,e=k.schMap,n=this.current.startNode,r=n.floor();r[0]===this.current.gridL[0]&&r[1]===this.current.gridL[1]||!function(){var n=r.toGrid(),i=t.current.pathBackup,a=t.current.initTrend,o=t.current.startRound,u=t.current.startRound=new f,l=[Math.average(n.map(function(t){return t[0]})),Math.average(n.map(function(t){return t[1]}))],c=i.searchNodeSub(l),d=i[c+1]?[i[c],i[c+1]]:i[c],y=n.reduce(function(t,e){return s(t,d)>s(e,d)?t:e});if(n.forEach(function(t){var e=o.get(t);if(e){var r=e.startExpand(n,t,a);u.set(t,e);for(var i=0;i<r.length;i++)u.set(r[i][0],r[i][1],"small")}}),y){var v=p(y,d,a,3);v.checkWayExcess(a,3);var g=new h(i);g.insert(v,0,c+1),g.checkWayRepeat(),u.set(y,g);for(var m=g.startExpand(n,y,a),w=0;w<m.length;w++)u.set(m[w][0],m[w][1],"small")}n.forEach(function(t){var e=u.get(t);if(!e){var r=p(t,d,a,3);r.checkWayExcess(a,3),e=new h(i),e.insert(r,0,c+1),e.checkWayRepeat(),u.set(t,e);for(var o=e.startExpand(n,t,a),s=0;s<o.length;s++)u.set(o[s][0],o[s][1],"small")}}),t.current.wayNow=new h(u.reduce(function(t,n){var r=t[1].length-!!e.getSingleValueByOrigin(t[0]),i=n[1].length-!!e.getSingleValueByOrigin(n[0]);return r>i?t:n})[1]),t.way.cloneWay(t.current.wayNow),t.current.gridL=Array.clone(r)}();var i=this.current.wayNow;i.length>1&&(i[0][0]===i[1][0]?this.way[1][0]=n[0]:this.way[1][1]=n[1]),this.way[0]=n,this.wayDrawing()},mergeLine:function(t){this.way[0].isEqual(t.way[0])?(this.way.reverse(),this.connect.reverse()):this.way[0].isEqual(t.way[t.way.length-1])?(this.way.reverse(),this.connect.reverse(),t.way.reverse(),t.connect.reverse()):this.way[this.way.length-1].isEqual(t.way[t.way.length-1])&&(t.way.reverse(),t.connect.reverse()),k.schMap.setSingleValueByOrigin(this.way[this.way.length-1],{form:"line"}),this.way.cloneWay(this.way.concat(t.way)),this.way.checkWayRepeat(),this.setConnect(1,t.connect[1]),t.replaceConnect(1,this.id),t.elementDOM.remove(),this.render(),this.markSign(),P.partsAll.deletePart(t.id)},collectCircle:function(t){var e=this;if("line"!==this.getConnectStatus(t))return[];var n=this.connect[t].split(" ");if(3===n.length)return[this.circle[t]];if(2===n.length){var r=function(){var r=Array.clone(e.way[t*(e.way.length-1)]);return{v:n.map(function(t){return P.partsAll.findPartObj(t)}).map(function(t){return t.circle[t.findConnect(r)]})}}();if("object"===("undefined"==typeof r?"undefined":(0,v["default"])(r)))return r.v}return!1},setCollectCircle:function(t){if("line"!==this.getConnectStatus(t))return!1;var e=this.connect[t].split(" "),n=this.current.pathBackup[t*(this.current.pathBackup.length-1)],r=this.way[t*(this.way.length-1)];if(n.isEqual(r))return!0;if(2===e.length)k.schMap.setSingleValueByOrigin(n,{form:"line"}),k.schMap.setSingleValueByOrigin(r,{form:"cross-point",id:this.id}),e.forEach(function(t){var e=P.partsAll.findPartObj(t);e.way.splice(e.findConnect(n)*e.way.length,0,Array.clone(r)),e.render(),e.markSign()});else if(3===e.length){var i=this.way[t*(this.way.length-1)];e.forEach(function(t){var e=P.partsAll.findPartObj(t);e.deleteConnect(this.id)}.bind(this));var a=P.partsAll.findPartObj(k.schMap.getSingleValueByOrigin(i).id);this.splitLine(a,t)}},markSign:function(){k.schMap.makeLineSign(this.id,this.way)},deleteSign:function(){k.schMap.deleteLineSign(this.id,this.way)},deformSelf:function(t){var e=this;flagBit.movemouse||(this.toGoing(),this.deleteSign(),this.current={pathBackup:Array.clone(this.way),startRound:new f,moveSub:this.way.nodeInWay([(t.pageX-grid.SVGX)/grid.zoom,(t.pageY-grid.SVGY)/grid.zoom]),wayNow:[],circle:[this.collectCircle(0),this.collectCircle(1)],rightWay:new h},this.current.direction=Number(this.way[this.current.moveSub][1]===this.way[this.current.moveSub+1][1]),this.current.segment={nodeFloor:[],nodeMouse:[Array.clone(this.way[this.current.moveSub]),Array.clone(this.way[this.current.moveSub+1])],startSegment:Array.clone(this.way.slice(0,this.current.moveSub)),endSegment:Array.clone(this.way.slice(this.current.moveSub+2)),segmentRound:new f},Object.freezeAll(this.current.pathBackup),this.current.segment.startSegment.length||(this.current.segment.startSegment=[Array.clone(this.way[0])]),this.current.segment.endSegment.length||(this.current.segment.endSegment=[Array.clone(this.way[this.way.length-1])]));var n=[(t.pageX-grid.lastX)/grid.zoom,(t.pageY-grid.lastY)/grid.zoom],r=this.current.segment.nodeMouse[0],i=this.current.segment.nodeMouse[1],a=this.current.direction;r[a]+=n[a],i[a]+=n[a];var o=[20*Math.floor(r[0]/20),20*Math.floor(r[1]/20)];o.isEqual(this.current.segment.nodeFloor)||!function(){var t=[],n=[];t[0]=o,a?(t[1]=[o[0],o[1]+20],n[0]=[i[0],t[0][1]],n[1]=[i[0],t[1][1]]):(t[1]=[o[0]+20,o[1]],n[0]=[t[0][0],i[1]],n[1]=[t[1][0],i[1]]);var r=e.current.segment.startSegment,s=e.current.segment.endSegment,u=e.current.segment.segmentRound;e.current.segment.segmentRound=new f;var l=e.current.segment.segmentRound;t.forEach(function(t,e){var i=u.get(t);if(!i){var a=[t,n[e]],o=Math.vectorInit(r[r.length-1],a[0]),c=p(r[r.length-1],a,o,3);c.checkWayRepeat(),c.checkWayExcess(o,3);var f=Math.vectorInit(s[0],a[1]),d=p(s[0],a,f,3);if(d.checkWayRepeat(),d.checkWayExcess(f,3),d.reverse(),i=new h(r.concat(c,d,s)),i.checkWayRepeat(),i.length>2){var y=k.schMap.getSingleValueByOrigin(i[1]);!y||"line"!==y.form&&"cross-point"!==y.form||i.splice(0,1),y=k.schMap.getSingleValueByOrigin(i[i.length-2]),!y||"line"!==y.form&&"cross-point"!==y.form||i.pop()}}l.set(t,i)});var c=void 0;l.get(t[0]).length>l.get(t[1]).length?(c=0,e.way.cloneWay(l.get(t[0]))):(c=1,e.way.cloneWay(l.get(t[1])));for(var d=t[c],y=n[c],v=1-a,g=0;g<e.way.length-1;g++)if(e.way[g][1-v]===e.way[g+1][1-v]&&e.way[g][1-v]===d[1-v]&&(e.way[g][v]<=d[v]&&e.way[g+1][v]<=d[v]&&e.way[g][v]>=y[v]&&e.way[g+1][v]>=y[v]||e.way[g][v]>=d[v]&&e.way[g+1][v]>=d[v]&&e.way[g][v]<=y[v]&&e.way[g+1][v]<=y[v])){e.current.moveSub=g;break}e.current.segment.nodeFloor=o}();var s=this.current.moveSub;this.way[s][a]=r[a],this.way[s+1][a]=r[a],this.wayDrawing();for(var u=0;u<2;u++)for(var l=this.current.circle[u],c=0;c<l.length;c++)l[c].setAttribute("transform","translate("+this.way[u*(this.way.length-1)].join(",")+")");grid.lastX=t.pageX,grid.lastY=t.pageY},deformSelfEnd:function(){this.way.standardize(),this.setCollectCircle(0),this.setCollectCircle(1),this.render(),this.markSign()},toSimpleData:function(){for(var t='{ partType: "line", way:[',e=0;e<this.way.length-1;e++)t+="["+this.way[e].join(",")+"],";return t+="["+this.way[this.way.length-1].join(",")+"]] },"}},e.LineClass=d},function(t,e,n){t.exports={"default":n(108),__esModule:!0}},function(t,e,n){n(109);var r=n(18).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(26),"Object",{defineProperties:n(35)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if("number"==typeof t){var e=new Array(t);return e}if(this.hash={},this.length=0,void 0!==t){t instanceof Array||this.push(t);for(var n=0;n<t.length;n++)this.push(t[n])}(0,u["default"])(this,{hash:{configurable:!1,writable:!1,enumerable:!1},length:{configurable:!1,enumerable:!1}})}Object.defineProperty(e,"__esModule",{value:!0}),e.PartsCollection=e.partsNow=e.partsAll=void 0;var a=n(100),o=r(a),s=n(107),u=r(s),l=50;i.prototype={length:0,constructor:i,push:function(t){if(!t.elementDOM)return!1;if(this.has(t)){var e=this.hash[t.id],n=t,r=this.length-1,i=this[r];this[r]=n,this[e]=i,this.hash[n]=r,this.hash[i]=e}else this[this.length++]=t,this.hash[t.id]=this.length-1;return this},pop:function(){var t=Array.prototype.pop.call(this);if(t)return delete this.hash[t.id],t},findPartObj:function(t){return!!this.has(t)&&this[this.hash[t]]},deletePart:function(t){var e=void 0;if("string"==typeof t)e=t;else{if(!(t.elementDOM&&t.input||t.id.indexOf("line")!==-1))throw"";e=t.id}if(void 0===this.hash[e])return!1;var n=this.hash[e];this.splice(n,1);for(var r=n;r<this.length;r++)this.hash[this[r].id]--;delete this.hash[e]},deleteParts:function(t){var e=this,n=t instanceof i?t:new i(t),r=new i(this);this.deleteAll(),r.forEach(function(t){return n.has(t)||e.push(t)})},has:function(t){var e=void 0;return e="string"==typeof t?t:t.id,void 0!==this.hash[e]},newId:function(t){for(var e=void 0,n=1;n<=l;n++)if(e=t+n,!this.has(e))return e;throw""},deleteAll:function(){for(var t=0;t<this.length;t++)this[t].toStatus("normal"),delete this.hash[this[t].id],delete this[t];this.length=0},selectAll:function(t){for(var e=0;e<t.length;e++)this.push(t[e])},forEach:function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)},connectGraph:function(){var t=[],e={};return this.forEach(function(t){return e[t.id]=!0}),this.forEach(function(n){e[n.id]&&!function(){for(var r=new i(n),a=new i;r.length;){var o=r.pop();e[o.id]=!1,a.push(o),o.connect.join(" ").split(" ").forEach(function(t){var n=c.findPartObj(t.split("-")[0]);""===n.partType||e[n.id]&&!r.has(n)&&r.push(n)})}t.push(a)}()}),t}},(0,o["default"])(i.prototype,Array.prototype);var c=new i,p=new i;e.partsAll=c,e.partsNow=p,e.PartsCollection=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return!1}function a(t,e,n,r){var i=e[t],a=[];for(var o in e)e.hasOwnProperty(o)&&e[o]===i&&o!==t&&a.push(o);for(var s=new h.Matrix(1,r),u=0;u<a.length;u++)s[0][n[a[u]]]=Math.pow(-1,parseInt(a[u][a[u].length-1])+1);return s}function o(t,e,n){for(var r=new h.Matrix(1,n),i=0;i<2;i++)e[t[i]]&&(r[0][e[t[i]]-1]=Math.pow(-1,i));return r}function s(t,e){return e[t+"-0"]}function u(t){var e={},n={},r=[],u=[],l=[],c=new f.PartsCollection,p=1,y=0,v="";if(t.forEach(function(t){"line"!==t.partType||c.has(t)||!function(){for(var n=new f.PartsCollection(t);n.length;){var r=n.pop();c.push(r),r.connect.join(" ").split(" ").forEach(function(t){var r=f.partsAll.findPartObj(t.split("-")[0]);"line"===r.partType?n.has(r)||c.has(r)||n.push(r):t.search("-")!==-1&&(e[t]=p)})}p++}()}),t.forEach(function(t){if("line"===t.partType||"current_meter"===t.partType||"voltage_meter"===t.partType||"reference_ground"===t.partType)return!0;if(d[t.partType]&&d[t.partType].apart){for(var r=d[t.partType].apart["interface"],i=d[t.partType].apart.connect,a=d[t.partType].apart.parts,o=0;o<r.length;o++){for(var s=e[t.id+"-"+o],u=0;u<r[o].length;u++)e[t.id+"-"+r[o][u]]=s;delete e[t.id+"-"+o]}for(var l=0;l<i.length;l++){for(var c=0;c<i[l].length;c++)e[t.id+"-"+i[l][c]]=p;p++}for(var h=0;h<a.length;h++){var f=a[h];n[t.id+"-"+f.id+"-0"]=y,n[t.id+"-"+f.id+"-1"]=y,y++}}else n[t.id+"-0"]=y,n[t.id+"-1"]=y,y++}),t.forEach(function(t){if("reference_ground"===t.partType){var n=e[t.id+"-0"];for(var i in e)e.hasOwnProperty(i)&&(e[i]>n?e[i]--:e[i]===n&&(e[i]=0));delete e[t.id+"-0"],c.push(t)}else if("current_meter"===t.partType){var a={};a.name=t.id,a.matrix=[],a.data=[];var o=e[t.id+"-0"];for(var s in e)if(e.hasOwnProperty(s)&&e[s]===o&&s.search("GND")===-1){var u=f.partsAll.findPartObj(s.split("-")[0]);"voltage_meter"!==u.partType&&"current_meter"!==u.partType&&a.matrix.push(s)}var l=Math.min(e[t.id+"-0"],e[t.id+"-1"]),p=Math.max(e[t.id+"-0"],e[t.id+"-1"]);for(var h in e)e.hasOwnProperty(h)&&(e[h]===p?e[h]=l:e[h]>p&&e[h]--);r.push(a),c.push(t),delete e[t.id+"-0"],delete e[t.id+"-1"]}}),v=i(e,n))return v;p=function(t){var e=-1;for(var n in t)t.hasOwnProperty(n)&&t[n]>e&&(e=t[n]);return e}(e),t.forEach(function(t){if("voltage_meter"===t.partType){var n={};n.name=t.id,n.data=[],n.matrix=new h.Matrix(1,p),e[t.id+"-0"]&&(n.matrix[0][e[t.id+"-0"]-1]+=1),e[t.id+"-1"]&&(n.matrix[0][e[t.id+"-1"]-1]+=-1),e.hasOwnProperty(t.id+"-0")&&delete e[t.id+"-0"],e.hasOwnProperty(t.id+"-1")&&delete e[t.id+"-1"],u.push(n),c.push(t)}}),t.deleteParts(c),c.deleteAll();for(var g=0;g<r.length;g++){var m=r[g].matrix;r[g].matrix=new h.Matrix(1,y);for(var w=r[g].matrix,b=0;b<m.length;b++){var x=m[b];w[0][n[x]]=Math.pow(-1,parseInt(x[x.length-1])+1)}}var T=new h.Matrix(p,y),M=new h.Matrix(y),S=new h.Matrix(y),_=new h.Matrix(y,1);for(var O in n)if(n.hasOwnProperty(O)){var k=e[O];k&&(T[k-1][n[O]]=Math.pow(-1,parseInt(O[O.length-1])+1))}t.forEach(function(t){!function r(t){var i=s(t.id,n);switch(t.partType){case"ac_voltage_source":M[i][i]=1,_[i][0]="update-"+l.length+"-0";break;case"dc_voltage_source":M[i][i]=1,_[i][0]=t.input[0].toVal();break;case"dc_current_source":S[i][i]=1,_[i][0]=t.input[0].toVal();break;case"resistance":M[i][i]=-1,S[i][i]=t.input[0].toVal();break;case"capacitor":M[i][i]=1,_[i][0]="update-"+l.length+"-0";break;case"VCVS":M[i][i]=1,M[i][n[t.input[1]]]=t.input[0].toVal();break;case"CCCS":var u=t.input[0].toVal();"number"==typeof u&&(u*=-1),S[i][i]=1,S[i][n[t.input[1]]]=u;break;default:for(var c=d[t.partType].apart,h=0;c&&h<c.parts.length;h++){var f=Object.clone(c.parts[h]);f.id=t.id+"-"+f.id,f.input=f.input.map(function(e){return e.search(/^input/)!==-1?t.input[e.split("-")[1]]:e.search(/this/)!==-1?e.replace(/this/g,t.id):e.search(/^update/)!==-1?"update-"+l.length+"-"+e.split("-")[1]:e}),r(f)}}if(d[t.partType]&&d[t.partType].iterative){var v=d[t.partType].iterative.create(t),g=v.describe;g.forEach(function(t){"voltage"===t.name?t.matrix=o(t.place,e,p):"current"===t.name&&(t.matrix=a(t.place,e,n,y))}),l.push(v)}}(t)});var P=h.Matrix.combination([[0,0,T],[T.transpose(),"E",0],[0,M,S]]),A=new h.Matrix(T.row,1).concatDown(new h.Matrix(T.column,1),_);A.forEach(function(t,e){if("string"==typeof t){var n=t.split("-"),r=l[n[1]];r.to[n[2]]={type:A,place:Array.clone(e)}}}),P.forEach(function(t,e){if("string"==typeof t){var n=t.split("-"),r=l[n[1]];r.to[n[2]]={type:P,place:Array.clone(e)}}}),this.factor=P,this.source=A,this.update=l,this.nodeNumber=p,this.branchNumber=y,this.observeCurrent=r,this.observeVoltage=u}Object.defineProperty(e,"__esModule",{value:!0}),e.Solver=void 0;var l=n(112),c=r(l),p=n(86),h=n(115),f=n(110),d={ac_voltage_source:{iterative:{equation:function(t,e,n,r){return function(i){return[t*Math.sin(e*i*Math.PI*2+r/180*Math.PI)+n]}},create:function(t){var e={to:[]};return e.process=d.ac_voltage_source.iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal(),t.input[3].toVal()),e.describe=[{name:"time"}],e}}},capacitor:{iterative:{equation:function(t){return function(e,n,r){var i=(e+r.last)/2*n+r.integral;r.last=e,r.integral=i;var a=i/t;return[a]}},create:function(t){var e={save:{last:0,integral:0},to:[]};return e.process=d.capacitor.iterative.equation(t.input[0].toVal()),e.describe=[{name:"current",place:t.id+"-0"},{name:"timeInterval"},{name:"save"}],e}}},diode:{iterative:{equation:function(t,e,n){return function(r){return r>=t?[e,t]:[n,0]}},create:function(t){var e={to:[]};e.process=d[t.partType].iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal());var n=d.diode.apart["interface"];return e.describe=[{name:"voltage",place:[t.id+"-"+n[1][0],t.id+"-"+n[0][0]]}],e}},apart:{"interface":[["R1-0"],["VD1-0"]],connect:[["R1-1","VD1-1"]],parts:[{partType:"resistance",id:"R1",input:["update-0"]},{partType:"dc_voltage_source",id:"VD1",input:["update-1"]}]}},transistor_npn:{iterative:{equation:function(t,e,n,r){return function(i,a){var o=new Array(4).fill(0);return i>=n?(o[0]=n,o[2]=e,a>=r?(o[1]=r,o[3]=-t):(o[1]=0,o[3]=0)):(o[0]=0,o[1]=0,o[2]=5e9,o[3]=0),o}},create:function(t){var e={to:[]};e.process=d[t.partType].iterative.equation(t.input[0].toVal(),t.input[1].toVal(),t.input[2].toVal(),t.input[3].toVal());var n=d.transistor_npn.apart["interface"];return e.describe=[{name:"voltage",place:[t.id+"-"+n[0][0],t.id+"-"+n[2][0]]},{name:"voltage",place:[t.id+"-"+n[1][0],t.id+"-"+n[2][0]]}],e}},apart:{"interface":[["V1-0"],["V2-0"],["R1-1","I1-1"]],connect:[["R1-0","V1-1"],["I1-0","V2-1"]],parts:[{partType:"dc_voltage_source",id:"V2",input:["update-0"]},{partType:"dc_voltage_source",id:"V1",input:["update-1"]},{partType:"resistance",id:"R1",input:["update-2"]},{partType:"CCCS",id:"I1",input:["update-3","this-R1-0"]}]}},operational_amplifier:{apart:{"interface":[["R1-1"],["R1-0"],["R2-0"]],connect:[["R2-1","VD1-0"]],parts:[{partType:"resistance",id:"R1",input:["input-1"]},{partType:"resistance",id:"R2",input:["input-2"]},{partType:"VCVS",id:"VD1",input:["input-0","this-R1-0"]}]}}};u.prototype.solve=c["default"].mark(function y(){var t,e,n,r,i,a,o,s,u,l,f,d,v,g,m,w,b,x,T,M,S,_,O,k,P,A,C,j,V;return c["default"].wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=(0,p.$)("#endtime").prop("value").toVal(),e=(0,p.$)("#stepsize").prop("value").toVal(),n=Math.round(t/e),r=this.update,i=this.factor,a=this.source,o=this.nodeNumber,s=this.branchNumber,u=this.observeCurrent,l=this.observeVoltage,f=new h.Matrix(this.nodeNumber,1),d=new h.Matrix(this.branchNumber,1),v=void 0,g=void 0,m=0;case 3:if(!(m<=n)){c.next=44;break}g=!1,w=0;case 6:if(!(w<r.length)){c.next=33;break}b=r[w],x=[],T=0;case 10:if(!(T<b.describe.length)){c.next=28;break}M=b.describe[T],c.t0=M.name,c.next="time"===c.t0?15:"timeInterval"===c.t0?17:"voltage"===c.t0?19:"current"===c.t0?21:"save"===c.t0?23:25;break;case 15:return x.push(m*e),c.abrupt("break",25);case 17:return x.push(e),c.abrupt("break",25);case 19:return x.push(M.matrix.mul(f)),c.abrupt("break",25);case 21:return x.push(M.matrix.mul(d)),c.abrupt("break",25);case 23:return x.push(r[w].save),c.abrupt("break",25);case 25:T++,c.next=10;break;case 28:for(S=b.process.apply(b,x),_=0;_<b.to.length;_++)O=b.to[_].type,k=b.to[_].place,O===i&&O[k[0]][k[1]]!==S[_]&&(g=!0),O[k[0]][k[1]]=S[_];case 30:w++,c.next=6;break;case 33:for(!g&&m||(v=i.inverse()),P=v.mul(a),f=P.slice([0,0],[o-1,0]),d=P.slice([o+s,0],[P.length-1,0]),A=0;A<l.length;A++)C=l[A].matrix,l[A].data.push(C.mul(f));for(j=0;j<u.length;j++)V=u[j].matrix,u[j].data.push(V.mul(d));return c.next=41,Math.round(m/Math.round(t/e)*100);case 41:m++,c.next=3;break;case 44:case"end":return c.stop()}},y,this)}),e.Solver=u},function(t,e,n){t.exports=n(113)},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(114),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||a).prototype),o=new d(r||[]);return i._invoke=p(t,n,o),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function a(){}function o(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function c(t){function e(n,r,a,o){var s=i(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c instanceof l?Promise.resolve(c.arg).then(function(t){
e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},o)}o(s.arg)}function r(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return a=a?a.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var a;this._invoke=r}function p(t,e,n){var r=S;return function(a,o){if(r===O)throw new Error("Generator is already running");if(r===k){if("throw"===a)throw o;return v()}for(;;){var s=n.delegate;if(s){if("return"===a||"throw"===a&&s.iterator[a]===g){n.delegate=null;var u=s.iterator["return"];if(u){var l=i(u,s.iterator,o);if("throw"===l.type){a="throw",o=l.arg;continue}}if("return"===a)continue}var l=i(s.iterator[a],s.iterator,o);if("throw"===l.type){n.delegate=null,a="throw",o=l.arg;continue}a="next",o=g;var c=l.arg;if(!c.done)return r=_,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===a)n.sent=n._sent=o;else if("throw"===a){if(r===S)throw r=k,o;n.dispatchException(o)&&(a="next",o=g)}else"return"===a&&n.abrupt("return",o);r=O;var l=i(t,e,n);if("normal"===l.type){r=n.done?k:_;var c={value:l.arg,done:n.done};if(l.arg!==P)return c;n.delegate&&"next"===a&&(o=g)}else"throw"===l.type&&(r=k,a="throw",o=l.arg)}}}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function y(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(m.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=g,i.done=!0,i};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},b=w.iterator||"@@iterator",x=w.toStringTag||"@@toStringTag",T="object"==typeof t,M=e.regeneratorRuntime;if(M)return void(T&&(t.exports=M));M=e.regeneratorRuntime=T?t.exports:{},M.wrap=r;var S="suspendedStart",_="suspendedYield",O="executing",k="completed",P={},A=s.prototype=a.prototype;o.prototype=A.constructor=s,s.constructor=o,s[x]=o.displayName="GeneratorFunction",M.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},M.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(A),t},M.awrap=function(t){return new l(t)},u(c.prototype),M.async=function(t,e,n,i){var a=new c(r(t,e,n,i));return M.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},u(A),A[b]=function(){return this},A[x]="Generator",A.toString=function(){return"[object Generator]"},M.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},M.values=y,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return a.type="throw",a.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?this.next=i.finallyLoc:this.complete(a),P},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),P}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:y(t),resultName:e,nextLoc:n},P}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(t instanceof Array){var r=i.isMatrix(t);if(!r)throw"";for(var a=0;a<t.length;a++)this[a]=Array.clone(t[a]);this.row=r[0],this.column=r[1],this.length=this.row}else{if("I"===e||"E"===e||"I"===n||"E"===n){for(var o=0;o<t;o++)this[o]=new Array(t).fill(0),this[o][o]=1;e=t}else for(var s=0;s<t;s++)this[s]=new Array(e).fill(n);this.row=t,this.column=e,this.length=t}(0,c["default"])(this,{row:{configurable:!1,enumerable:!1,writable:!1},column:{configurable:!1,enumerable:!1,writable:!1},length:{configurable:!1,enumerable:!1,writable:!1}}),Object.sealAll(this)}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var a=n(100),o=r(a),s=n(2),u=r(s),l=n(107),c=r(l);i.prototype={constructor:i,length:0,exchange:function(t,e){if(t[0]!==e[0]){var n=this[t[0]];this[t[0]]=this[e[0]],this[e[0]]=n}if(t[1]!==e[1])for(var r=0;r<this.length;r++){var i=this[r][t[1]];this[r][t[1]]=this[r][e[1]],this[r][e[1]]=i}},mul:function(t){var e=t instanceof i?t:new i(t);if(this.column!==e.row)throw"";for(var n=this.row,r=e.column,a=new i(n,r),o=0;o<n;o++)for(var s=0;s<r;s++)for(var u=0;u<this.column;u++)a[o][s]+=this[o][u]*e[u][s];return 1===n&&1===r?a[0][0]:a},multo:function(t){var e=t instanceof i?t:new i(t);return this.mul.call(e,this)},luDecompose:function(){if(this.row!==this.column)throw"";for(var t=this.row,e=i.clone(this),n=new i(t),r=new i(t,"E"),a=0;a<t;a++){if(a>0)for(var o=a;o<t;o++){n[o][a-1]=e[o][a-1]/e[a-1][a-1];for(var s=a;s<t;s++)e[o][s]-=n[o][a-1]*e[a-1][s];e[o][a-1]=0}if(a<t-1){for(var u=0,l=0,c=a;c<t;c++)Math.abs(e[c][a])>u&&(u=Math.abs(e[c][a]),l=c);n.exchange([a,0],[l,0]),e.exchange([a,0],[l,0]),r.exchange([a,0],[l,0])}}for(var p=0;p<t;p++)n[p][p]=1;return[n,e,r]},inverse:function(){for(var t=this.luDecompose(),e=(0,u["default"])(t,3),n=e[0],r=e[1],a=e[2],o=this.row,s=0;s<r.row;s++)if(!r[s][s])throw"";for(var l=new i(o),c=new i(o),p=0;p<o;p++){c[p][p]=1/r[p][p];for(var h=p-1;h>=0;h--){for(var f=0,d=h+1;d<=p;d++)f+=r[h][d]*c[d][p];c[h][p]=-f/r[h][h]}}for(var y=0;y<o;y++){l[y][y]=1;for(var v=y+1;v<o;v++)for(var g=y;g<=v-1;g++)l[v][y]-=n[v][g]*l[g][y]}var m=c.mul(l).mul(a);return m},forEach:function(t){if(this instanceof i)for(var e=0;e<this.row;e++)for(var n=0;n<this.column;n++)t(this[e][n],[e,n],this);else{if(!(this instanceof Array))throw"";var r=i.isMatrix(this);if(!r)throw"";for(var a=0;a<r[0];a++)for(var o=0;o<r[1];o++)t(this[a][o],[a,o],this)}},transpose:function(){for(var t=new i(this.column,this.row),e=0;e<this.row;e++)for(var n=0;n<this.column;n++)t[n][e]=this[e][n];return t},concatRight:function(){for(var t=i.clone(this),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=function(e){var r=n[e],a=void 0,o=void 0;if(r instanceof i)a=r.row,o=r.column;else{var s=i.isMatrix(r);if(!s)throw"";a=s[0],o=s[1]}if(t.row!==a)throw"";var l=new i(a,t.column+o);t.forEach(function(t,e){var n=(0,u["default"])(e,2),r=n[0],i=n[1];return l[r][i]=t}),i.prototype.forEach.call(r,function(e,n){var r=(0,u["default"])(n,2),i=r[0],a=r[1];return l[i][a+t.column]=e}),t=l},o=0;o<n.length;o++)a(o);return t},concatDown:function(){for(var t=this,e=i.clone(this),n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];for(var o=function(n){var a=r[n],o=void 0,s=void 0;if(a instanceof i)o=a.row,s=a.column;else{var l=i.isMatrix(a);if(!l)throw"";o=l[0],s=l[1]}if(t.column!==s)throw"";var c=new i(e.row+o,s);e.forEach(function(t,e){var n=(0,u["default"])(e,2),r=n[0],i=n[1];return c[r][i]=t}),i.prototype.forEach.call(a,function(t,n){var r=(0,u["default"])(n,2),i=r[0],a=r[1];return c[i+e.row][a]=t}),e=c},s=0;s<r.length;s++)o(s);return e},slice:function(t,e){if(!(t instanceof Array)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1]||!(e instanceof Array)&&2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1]||t[0]<0||e[0]<0||t[1]<0||e[1]<0||t[0]>this.row||e[0]>this.row||t[1]>this.column||e[1]>this.column)throw"";var n=[],r=[],a=t[0]<e[0]?[t[0],e[0]]:[e[0],t[0]],o=(0,u["default"])(a,2);n[0]=o[0],r[0]=o[1];var s=t[1]<e[1]?[t[1],e[1]]:[e[1],t[1]],l=(0,u["default"])(s,2);n[1]=l[0],r[1]=l[1];for(var c=new i(r[0]-n[0]+1,r[1]-n[1]+1),p=n[0];p<=r[0];p++)for(var h=n[1];h<=r[1];h++)c[p-n[0]][h-n[1]]=this[p][h];return c},vision:function(){for(var t=0;t<this.row;t++)console.log(this[t].join(","))}},i.extend({isMatrix:function(t){var e=-1,n=-1;for(var r in t)if(t.hasOwnProperty(r)){if(!(parseInt(r)-e===1&&t[r]instanceof Array))return!1;var i=t[r],a=-1;for(var o in i)if(i.hasOwnProperty(o)){if(parseInt(o)-a!==1||"number"!=typeof i[o])return!1;a++}if(n===-1)n=a;else if(n!==a)return!1;e++}return[e+1,n+1]},combination:function(t){if(!(t&&t instanceof Array))throw"";for(var e=0;e<t.length-1;e++)if(!(t[e]&&t[e]instanceof Array&&t[e+1]instanceof Array&&t[e].length===t[e+1].length))throw"";for(var n=[],r=0;r<t.length;r++){for(var a=void 0,o=0;o<t[r].length;o++)if("number"!=typeof t[r][o]&&"string"!=typeof t[r][o]){var s=void 0;if(s=t[r][o]instanceof i?t[r][o].row:Object.isMatrix(t[r][o])[0],void 0!==a&&a!==s)throw"";a=s}n.push(a)}for(var u=[],l=0;l<t[0].length;l++){for(var c=void 0,p=0;p<t.length;p++)if("number"!=typeof t[p][l]&&"string"!=typeof t[p][l]){var h=void 0;if(h=t[p][l]instanceof i?t[p][l].column:Object.isMatrix(t[p][l])[1],void 0!==c&&c!==h)throw"";c=h}u.push(c)}for(var f=void 0,d=0;d<t.length;d++){for(var y=void 0,v=0;v<t[d].length;v++){var g=void 0;g=t[d][v]instanceof i&&t[d][v]instanceof Array?t[d][v]:new i(n[d],u[v],t[d][v]),y=y?y.concatRight(g):g}f=f?f.concatDown(y):y}return f},clone:function(t){if(!(t instanceof i))throw"";var e=new i(t.row,t.column);return t.forEach(function(t,n){var r=(0,u["default"])(n,2),i=r[0],a=r[1];return e[i][a]=t}),e}}),(0,o["default"])(i.prototype,Array.prototype),e.Matrix=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return Math.floor(t/50)}function a(t){if(!t)return 1;var e=t/Math.abs(t),n=t.rank(),r=Math.abs(t).toSFixed(2),i=Math.floor(r/n),a=(t*e/n-i).toSFixed(),o=void 0;return o=i<3?a<.2?.2:a<.5?.5:1:i>2&&i<5&&a<.5?.5:1,(n*(i+o)*e).toSFixed()}function o(t,e,n){for(var r=t.rank(),i=(t/r).toSFixed(),a=Math.abs(e/r).toSFixed(),o=[],s=1;s<2*n;s++){var u=(i/s).toSFixed(8),l=(a/u).toSFixed(8);u===parseFloat(u.toFixed(5))&&l===Math.floor(l)&&o.push(s+l)}return o.reduce(function(t,e){return Math.abs(t-n)<Math.abs(e-n)?t:e})}function s(t,e){var n=void 0,r=void 0,s=i(e);if(t[0]===t[1]){var u=Math.abs(t[0]),l=u.rank(),c=Math.floor(u/l),p=c===(u/l).toSFixed()?c-1:c,h=p+2;return t[0]>0?(n=(p*l).toSFixed(),r=(h*l).toSFixed()):(n=-(h*l).toSFixed(),r=-(p*l).toSFixed()),[n,r,o(r-n,0,s)]}if(t[0]*t[1]<=0){var f=Math.max(Math.abs(t[0]),Math.abs(t[1])),d=Math.min(Math.abs(t[0]),Math.abs(t[1])),y=a(f),v=(2*a((y+d)/2)-y).toSFixed();return Math.abs(t[0])<Math.abs(t[1])?(n=-v,r=y):(n=-y,r=v),[n,r,o(r,n,s)]}var g=Math.min(Math.abs(t[0]),Math.abs(t[1])),m=2*a(Math.abs(t[0]-t[1])/2),w=o(m,0,s),b=Math.floor(g/(m/w))*(m/w);return t[0]<0?(n=-(m+b),r=-b):(n=b,r=m+b),[n,r,w]}function u(t,e){for(var n=Math.maxOfArray(e),r=Math.minOfArray(e);t[1]<r;)t.splice(0,1);for(t[0]=r;t[t.length-2]>n;)t.pop();t[t.length-1]=n}function l(t){if(!(t&&t.attributes&&t.nodeName))throw"canvas";this.elementDOM=t,this.ctx=t.getContext("2d"),this.length={width:parseInt(t.getAttribute("width")),height:parseInt(t.getAttribute("Height"))},this.clear()}function c(t,e,n){this.elementDOM=(0,y.$)(e),this.type=n,this.output=t,this["long"]={},this.time=(0,y.$)("#endtime").prop("value").toVal(),this.stepTime=(0,y.$)("#stepsize").prop("value").toVal();var r=80,i=10,a=70,o=this.elementDOM.width(),s=this.elementDOM.height();this["long"].waveWidth=o-r-10,this["long"].waveHeight=s-a-i,this["long"].waveRound=[[r,i],[r,i+this["long"].waveHeight],[r+this["long"].waveWidth,i+this["long"].waveHeight],[r+this["long"].waveWidth,i]];var u=[Math.minOfArray(t.map(function(t){return Math.minOfArray(t.data)})),Math.maxOfArray(t.map(function(t){return Math.maxOfArray(t.data)}))];this.drawBackground([0,this.time],u,!0);for(var l=0;l<t.length;l++)this.elementDOM.append((0,y.$)("<canvas>",{"class":"graph-canvas",width:this["long"].waveWidth-2,Height:this["long"].waveHeight-2,id:"graph-"+this.output[l].name,style:"position: absolute; left: 81px; top: 11px; display: block"}));this.drawCurve();for(var c=0;c<this.output.length;c++)this.output[c].status=!0;var p=this.elementDOM.append((0,y.$)("<div>",{"class":"graph-action",style:"position: absolute; left: 80px; top: 10px;width: "+this["long"].waveWidth+"px; Height: "+this["long"].waveHeight+"px;"}));p.append((0,y.$)("<canvas>",{"class":"graph-action-canvas",width:this["long"].waveWidth,Height:this["long"].waveHeight,style:"position: absolute; left: 0px; top: 0px;"}));for(var h=0;h<this.output.length+1;h++)p.append((0,y.$)("<div>",{"class":"graph-action-tip",style:"position: absolute; display: none;"}));p.append((0,y.$)("<div>",{"class":"graph-action-cover",style:"position: absolute; left: 0px; top: 0px;width: "+this["long"].waveWidth+"px; Height: "+this["long"].waveHeight+"px;"})),this.createTable()}Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var p=n(2),h=r(p),f=n(59),d=r(f),y=n(86),v=["#50B4C8","#F0A050","#50C850"],g="#66CCCC",m=(0,y.$)("#graph-page"),w=void 0;l.prototype={attributesBackUp:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this.ctx[n],this.ctx[n]=t[n]);return e},attributesAssignment:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.ctx[e]=t[e])},attributesDefault:function(){var t={fillStyle:"#000000",font:"10px sans-serif",globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",shadowOffsetX:0,shadowOffsetY:0,strokeStyle:"#000000",textAlign:"start",textBaseline:"alphabetic"};for(var e in t)t.hasOwnProperty(e)&&(this.ctx[e]=t[e])},line:function(t,e){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],r=void 0;n&&(r=this.attributesBackUp(e)),this.ctx.beginPath(),this.ctx.moveTo(t[0][0],t[0][1]);for(var i=1;i<t.length;i++)this.ctx.lineTo(t[i][0],t[i][1]);this.ctx.stroke(),n&&this.attributesAssignment(r)},fillRect:function(t,e,n){"object"===("undefined"==typeof t?"undefined":(0,d["default"])(t))&&e===w&&n===w&&(n=t,t=[0,0],e=[this.length.width,this.length.height]);var r=this.attributesBackUp(n);this.ctx.fillRect(t[0],t[1],e[0],e[1]),this.attributesAssignment(r)},strokeRect:function(t,e,n){var r=this.attributesBackUp(n);this.ctx.strokeRect(t[0],t[1],e[0],e[1]),this.attributesAssignment(r)},circle:function(t,e,n,r){var i=arguments.length<=4||void 0===arguments[4]||arguments[4],a=void 0;i&&(a=this.attributesBackUp(r)),this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI,!0),this.ctx.fill(),i&&this.attributesAssignment(a)},clear:function(t,e){t===w||e===w?this.ctx.clearRect(0,0,this.length.width,this.length.height):this.ctx.clearRect(t[0],t[1],e[0],e[1])},toDataURL:function(){var t;return(t=this.elementDOM).toDataURL.apply(t,arguments)},toText:function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]||arguments[3],i=void 0;r&&(i=this.attributesBackUp(n)),this.ctx.fillText(t,e[0],e[1]),r&&this.attributesAssignment(i)},drawImage:function(){var t;(t=this.ctx).drawImage.apply(t,arguments)}},c.prototype={drawBackground:function(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=this["long"].waveWidth,i=this["long"].waveHeight,a=this["long"].waveRound,o=this.elementDOM.childSelect("canvas.graph-background",1,{width:this.elementDOM.width()+"px",height:this.elementDOM.height()+"px",style:"position: absolute; left: 0px; top: 0px;"});this.axisList=[];var c=new l(o[0]);c.fillRect(a[0],[r,i],{fillStyle:"#fffdf6"}),c.line(a.slice(1,4),{shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.7)",strokeStyle:"#999999"}),c.line(a.slice(0,2),{shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.7)",strokeStyle:"#999999"}),c.attributesAssignment({strokeStyle:"#cccccc",lineWidth:1});for(var p=0;p<2;p++){for(var f=[t,e][p],d=[this["long"].waveWidth,this["long"].waveHeight][p],y=s(f,d),v=(0,h["default"])(y,3),g=v[0],m=v[1],w=v[2],b=(m-g).toSFixed(),x=(b/w).toSFixed(),T=[g];T[T.length-1]<m;)T.push((T[T.length-1]+x).toSFixed());n||u(T,f),this.drawGrid(p,T,c),this.axisList[p]=T}c.attributesDefault(),c.strokeRect(a[0],[r,i],{strokeStyle:"#999999",lineWidth:2})},drawGrid:function(t,e,n){var r=this["long"].waveRound,i=[{name:"graph-bottomList",way:function(t){return[[r[0][0]+Math.round(t)+.5,r[0][1]],[r[0][0]+Math.round(t)+.5,r[1][1]+5]]},tagStyle:function(t){return"top: 8px; transform: rotate(35deg); left: "+(r[0][0]+t-10)+"px"},signStyle:r[2][0]+10+"px"},{name:"graph-leftList",way:function(t){return[[r[2][0],r[1][1]-Math.round(t)-.5],[r[1][0]-4,r[1][1]-Math.round(t)-.5]]},tagStyle:function(t){return"right: 0px; top: "+(r[1][1]-t-9)+"px"},signStyle:"75px"}],a=this.elementDOM.childSelect("div."+i[t].name,1),o=a.childSelect("div.axis-number",e.length),s=a.childSelect("div.axis-unit",1),u=[this["long"].waveWidth,this["long"].waveHeight][t]/(e[e.length-1]-e[0]),l=Math.maxOfArray(e).toShort(),c=l.rank,p=l.number.powRank(),h=t?"voltage"===this.type?"V":"A":"s";s.text(l.unit+h),s.attr("style","left:"+i[t].signStyle);for(var f=0;f<e.length;f++){var d=e[f-1]?Math.round((e[f-1]-e[0])*u)-.5:-30,y=Math.round((e[f]-e[0])*u)-.5;n.line(i[t].way(y)),y-d>20?o.get(f).attr("style",i[t].tagStyle(y)).text((e[f]*c).toSFixed().toFixed(4-p)):o.get(f).remove()}},drawCurve:function(){for(var t=this.backgroundStartToEnd(),e=(0,h["default"])(t,4),n=e[0],r=e[1],i=e[2],a=e[3],o=this["long"].waveWidth/(r-n).toSFixed(),s=this["long"].waveHeight/(a-i).toSFixed(),u=this.time/(this.output[0].data.length-1),c=0;c<this.output.length;c++){for(var p=this.output[c].name,f=this.output[c].data,d=[],y=0;y<f.length;y++)d.push([o*(y*u-n),this["long"].waveHeight-s*(f[y]-i)-1.25]);var g=new l(document.getElementById("graph-"+p));g.clear(),g.line(d,{strokeStyle:v[c],lineWidth:2.5})}},createTable:function(){for(var t=this.elementDOM.append((0,y.$)("<table>",{"class":"graph-table-legend"})).append((0,y.$)("<tbody>")),e=0;e<this.output.length;e++){var n=t.append((0,y.$)("<tr>",{"class":"graph-table-row",id:"table-legend-"+this.output[e].name}));n.append((0,y.$)("<td>",{"class":"graph-table-swatch-column"})).append((0,y.$)("<div>",{"class":"table-legend-swatch-outline"})).append((0,y.$)("<div>",{"class":"table-legend-swatch",style:"border-color:"+v[e]+";background-color: "+v[e]+";"}));var r=n.append((0,y.$)("<td>",{"class":"graph-table-legend graph-table-legend-label"})),i=this.output[e].name.split("_");i[1]?r.text(i[0]+"("+i[1]+")"):r.inner(i[0])}},drawMove:function(t,e){var n=new l(this.elementDOM[0].querySelector(".graph-action-canvas"));n.clear(),n.line([[t,0],[t,this["long"].waveHeight]],{strokeStyle:"#bbbbbb",lineWidth:1});var r=this.backgroundStartToEnd(),i=(0,h["default"])(r,4),a=i[0],o=i[1],s=i[2],u=i[3],c=this.stepTime,p=this["long"].waveWidth,f=this["long"].waveHeight,d=5,g=(o-a)/p,m=Math.round(((t-d<2?2:t-d)*g+a)/c),w=Math.round(((t+d>p-2?p-2:t+d)*g+a)/c),b=(u-s)/f,x=u-(e-d<2?2:e-d)*b,T=u-(e+d>f-2?f-2:e+d)*b,M=1/0,S=-1;if("number"==typeof e){for(var _=0;_<this.output.length;_++)if(this.output[_].status)for(var O=this.output[_].data,k=m;k<=w;k++)if(O[k]>T&&O[k]<x){var P=(k*c-a)/g,A=(u-O[k])/b,C=Math.abs(P-t)+Math.abs(A-e);C<M&&(M=C,S=k)}}else"string"==typeof e&&e.search("index:")!==-1&&(S=Number(e.split(":")[1]));var j=(0,y.$)(".graph-action-tip",this.elementDOM),V="voltage"===this.type?"V":"A";if(S!==-1){j.attr("style","position:absolute; display: block");for(var E=(S*c-a)/g,N=0;N<this.output.length;N++)if(this.output[N].status){var R=(u-this.output[N].data[S])/b;n.circle(E,R,5,{fillStyle:v[N]}),j.get(N).text(this.output[N].data[S].toShort(5).txt+V).css({right:p-E+"px",bottom:f-R+"px"})}else j.get(N).attr("style","display: none");return j.get(-1).text((S*c).toShort(5).txt+"s").css({right:p-E+"px",bottom:"0px"}),"index:"+S}return j.attr("style","display: none"),!1},clearActionCanvas:function(){var t=(0,y.$)(".graph-action-canvas",this.elementDOM)[0],e=t.getContext("2d");e.clearRect(0,0,this["long"].waveWidth,this["long"].waveHeight),(0,y.$)(".graph-action-tip",this.elementDOM).attr("style","display: none")},drawSelect:function(t,e){e.drawer||(e.drawer=new l(e.canvas),e.offset=(0,y.$)(e.canvas).offset((0,y.$)("div#graph-page")));var n=2,r=e.drawer,i=e.drawer.length,a=[t.offsetX-e.offset[0],t.offsetY-e.offset[1]];if(t.target!==t.currentTarget){for(var o=t.target;"div"!==o.tagName.toLowerCase();)o=o.parentNode;for(;o!==t.currentTarget;)a[0]+=o.offsetLeft,a[1]+=o.offsetTop,o=o.parentNode}var s=Math.min(e.start[0],a[0]),u=Math.max(e.start[0],a[0]),c=Math.min(e.start[1],a[1]),p=Math.max(e.start[1],a[1]);s<n&&(s=n),c<n&&(c=n),u>i.width-n&&(u=i.width-n),p>i.height-n&&(p=i.height-n);var h=[s,c],f=[u-s,p-c];r.clear(),r.fillRect({fillStyle:"rgba(187,187,187,0.5)"}),r.clear(h,f),r.strokeRect(h,f,{strokeStyle:"#aaaaaa"}),e.select=[s,c,u,p]},backgroundStartToEnd:function(){return[this.axisList[0][0],this.axisList[0][this.axisList[0].length-1],this.axisList[1][0],this.axisList[1][this.axisList[1].length-1]]},pixel2Value:function(t){var e=this.backgroundStartToEnd(),n=(0,h["default"])(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=(i-r).toSFixed()/this["long"].waveWidth,u=(o-a).toSFixed()/this["long"].waveHeight,l=[t[0],t[2]].map(function(t){return(t*s+r).toSFixed(4)}),c=[t[3],t[1]].map(function(t){return(o-t*u).toSFixed(4)});return[l,c]}},c.toImage=function(){if(m.attr("class").search("visionAll")===-1)throw"";var t=new l((0,y.$)("<canvas>",{style:"display: none",height:m.height()+"px",width:m.width()+"px"})[0]);t.fillRect([0,0],[t.length.width,t.length.height],{fillStyle:g}),(0,y.$)("div#graph-title span").each(function(e){var n=(0,y.$)(e),r=n.offset(m),i=[r[0],r[1]+15.5];t.toText(n.text(),i,{font:"16px Microsoft YaHei"})}),t.attributesAssignment({font:"10px Arial"}),(0,y.$)("div.graph-individual div.graph-leftList div.axis-number, div.graph-individual div.axis-unit").each(function(e){var n=(0,y.$)(e),r=n.offset(m),i=[r[0],r[1]+10.5];t.toText(n.text(),i,{},!1)}),(0,y.$)("div.graph-individual canvas.graph-background, div.graph-individual canvas.graph-individual, div.graph-individual canvas.graph-canvas").each(function(e){var n=(0,y.$)(e).offset(m);t.drawImage(e,n[0],n[1])}),t.attributesDefault(),(0,y.$)("div.graph-individual tbody").each(function(e){var n=(0,y.$)(e),r=n.offset(m).map(function(t){return t+.5}),i=[n.innerWidth(),n.innerHeight()];t.fillRect(r,i,{fillStyle:"rgba(255, 255, 255, 0.6)"}),t.strokeRect(r,i,{strokeStyle:"#cccccc",lineWidth:1}),(0,y.$)("div.table-legend-swatch-outline",e).each(function(e,n){var r=(0,y.$)(e),i=r.offset(m).map(function(t){return t+1.5}),a=[r.innerWidth()+1,r.innerHeight()+1];n&&(i[1]-=1),t.strokeRect(i,a,{strokeStyle:"#cccccc",lineWidth:1})}),(0,y.$)("div.table-legend-swatch",e).each(function(e,n){var r=(0,y.$)(e),i=r.offset(m).map(function(t){return t+1}),a=[2*e.clientLeft,2*e.clientTop];n&&(i[1]-=1),t.fillRect(i,a,{fillStyle:r.attr("style").split(";")[0].split(":")[1]})}),(0,y.$)("td.graph-table-legend.graph-table-legend-label",e).each(function(e,n){var r=(0,y.$)(e),i=r.offset(m);i[0]+=1,n?i[1]+=12:i[1]+=13,t.toText(r.text(),i,{font:"10px Arial",fillStyle:"#696969"})})}),t.attributesAssignment({font:"10px Arial"});var e=35/180*Math.PI;return t.ctx.rotate(e),(0,y.$)(".graph-bottomList .axis-number").each(function(n){var r=(0,y.$)(n),i=r.offset(m),a=i[0]/Math.cos(e),o=i[0]*Math.tan(e),s=i[1]-o,u=s*Math.sin(e);t.toText(r.text(),[a+u,s*Math.cos(e)],{},!1)}),t.toDataURL()},e.Graph=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.styleRule=void 0;var i=n(118),a=r(i),o=n(119),s=r(o),u=n(86),l=function(){function t(e){(0,a["default"])(this,t);for(var n=document.styleSheets,r=-1,i=0;i<n.length;i++)if(n[i].href||(r=i),n[i].cssRules)for(var o=0;o<n[i].cssRules.length;o++)if(n[i].cssRules[o].name===e)return this.original=n[i].cssRules[o],this;if(r===-1){var s=(0,u.$)("head");s.append((0,u.$)("<style>")),n=document.styleSheets,r=n.length-1}var l=n[r];return l.insertRule("@keyframes "+e+"{}",l.cssRules.length),this.original=l.cssRules[l.cssRules.length-1],this}return(0,s["default"])(t,[{key:"setRule",value:function(t,e){var n=this.original;n.deleteRule(t);var r="";for(var i in e)e.hasOwnProperty(i)&&(r+=i+":"+e[i]+";");r=t+" {"+r+"}",n.appendRule(r)}}]),t}();e.styleRule=l},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(79),a=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=void 0,n=[10,-10];if("string"==typeof t?e=t:"object"===("undefined"==typeof t?"undefined":(0,l["default"])(t))&&(e=t.partType),this.extend(Object.clone(w[e].readWrite)),(0,s["default"])(this,w[e].readOnly),this.id=y.partsAll.newId(this.id),this.rotate=new h.Matrix([[1,0],[0,1]]),this.position=new p.Point([1e3,1e3]),this.current={},this.connect=new Array(this.pointInfor.length).fill(!1),this.circle=[],"object"===("undefined"==typeof t?"undefined":(0,l["default"])(t)))for(var r in t)if(t.hasOwnProperty(r))switch(r){case"partType":continue;case"rotate":this.rotate=new h.Matrix(t[r]);break;case"text":n=Array.clone(t[r]);break;case"position":this[r]=new p.Point(t[r]);break;default:t[r]instanceof Array?this[r]=Array.clone(t[r]):this[r]=t[r]}this.input||(this.input=[]),this.elementDOM=this.createPart(),this.setPosition();for(var i=0;i<this.connect.length;i++)this.circle[i]=(0,c.$)("#"+this.id+"-"+i,this.elementDOM);this.textVisition(n),y.partsAll.push(this)}function a(t){if(!(t instanceof Array)){var e=Number(t);return{left:e,right:e,top:e,bottom:e}}return 2===t.length?{top:t[0],bottom:t[0],left:t[1],right:t[1]}:4===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[3]}:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.partsinfo=e.PartClass=void 0;var o=n(100),s=r(o),u=n(59),l=r(u),c=n(86),p=n(105),h=n(115),f=n(104),d=n(117),y=n(110),v="http://www.w3.org/2000/svg",g=(0,c.$)("#area-of-parts"),m=[new h.Matrix([[0,-1]]),new h.Matrix([[-1,0]]),new h.Matrix([[0,1]]),new h.Matrix([[1,0]])],w={resistance:{readWrite:{id:"R_",input:["10k"]},readOnly:{partType:"resistance",inputTxt:[""],parameterUnit:[""],visionNum:2,txtLocate:14,padding:[0,1],margin:1,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],aspectInfor:[{name:"path",attribute:{d:"M-40,0H-24L-20,-9L-12,9L-4,-9L4,9L12,-9L20,9L24,0H40"}},{name:"rect",attribute:{x:"-30",y:"-13",width:"60",height:"26","class":"focus-part"}}],introduction:""}},capacitor:{readWrite:{id:"C_",input:["100u"]},readOnly:{partType:"capacitor",inputTxt:[""],parameterUnit:["F"],visionNum:2,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],padding:[0,1],margin:1,txtLocate:22,aspectInfor:[{name:"path",attribute:{d:"M5,0H40M-40,0H-5M-5,-16V16M5,-16V16"}},{name:"rect",attribute:{x:"-30",y:"-15",width:"60",height:"30","class":"focus-part"}}],introduction:""}},inductance:{readWrite:{id:"L_",input:["10u"]},readOnly:{partType:"inductance",inputTxt:[""],parameterUnit:["H"],visionNum:2,pointInfor:[{position:[-40,0],direction:[-1,0]},{position:[40,0],direction:[1,0]}],padding:[0,1],margin:1,txtLocate:13,aspectInfor:[{name:"path",attribute:{d:"M-40,0H-24M24,0H40M-24,0Q-18,-12,-12,0M-12,0Q-6,-12,0,0M0,0Q6,-12,12,0M12,0Q18,-12,24,0"}},{name:"rect",attribute:{x:"-30",y:"-10",width:"60",height:"15","class":"focus-part"}}],introduction:""}},dc_voltage_source:{readWrite:{id:"V_",input:["12"]},readOnly:{partType:"dc_voltage_source",inputTxt:[""],parameterUnit:["V"],visionNum:2,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:20,aspectInfor:[{name:"path",attribute:{d:"M0,-40V-5M0,5V40M-16,-5H16M-10.5,5H10.5M-10,-12H-5M-7.5,-15V-9"}},{name:"rect",attribute:{x:"-16",y:"-30",width:"32",height:"60","class":"focus-part"}}],introduction:""}},ac_voltage_source:{readWrite:{id:"V_",input:["220","50","0","0"]},readOnly:{partType:"ac_voltage_source",inputTxt:["","","",""],parameterUnit:["V","Hz","V",""],visionNum:3,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:24,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19","class":"white-fill"}},{name:"path",attribute:{d:"M0,-40V-19.5M0,19.5V40M0,-16V-8M-4,-12H4M-4,15H4M-10,0Q-5,-10,0,0M0,0Q5,10,10,0"}},{name:"rect",attribute:{x:"-20",y:"-30",width:"40",height:"60","class":"focus-part"}}],introduction:""}},dc_current_source:{readWrite:{id:"I_",input:["10"]},readOnly:{partType:"dc_current_source",inputTxt:[""],parameterUnit:["A"],visionNum:2,pointInfor:[{position:[0,40],direction:[0,1]},{position:[0,-40],direction:[0,-1]}],padding:[1,0],margin:1,txtLocate:20,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19","class":"white-fill"}},{name:"path",attribute:{d:"M0,-40V-20M0,20V40M0,-12V12"}},{name:"polygon",attribute:{points:"0,-14 -5,-4 0,-8 5,-4","class":"fill-whole"}},{name:"rect",attribute:{x:"-20",y:"-30",width:"40",height:"60","class":"focus-part"}}],introduction:""}},reference_ground:{readWrite:{id:"GND_"},readOnly:{partType:"reference_ground",inputTxt:[],visionNum:0,pointInfor:[{position:[0,-20],direction:[0,-1]}],padding:0,margin:1,txtLocate:12,aspectInfor:[{name:"path",attribute:{d:"M0,-20V0M-12,0H12M-7,5H7M-2,10H2"}},{name:"rect",attribute:{x:"-20",y:"-2",width:"40",height:"32","class":"focus-part"}}],introduction:""}},voltage_meter:{readWrite:{id:"VM_"},readOnly:{partType:"voltage_meter",inputTxt:[],visionNum:1,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],padding:1,margin:[1,0],txtLocate:24,aspectInfor:[{name:"circle",attribute:{cx:"0",cy:"0",r:"19","class":"white-fill"}},{name:"path",attribute:{d:"M0,-40V-20M0,20V40M0,-16V-8M-4,-12H4M-4,12H4"}},{name:"path",attribute:{d:"M-7,-6L0,7L7,-6","class":"part-rotate"}},{name:"rect",
attribute:{x:"-20",y:"-30",width:"40",height:"60","class":"focus-part"}}],introduction:""}},current_meter:{readWrite:{id:"IM_"},readOnly:{partType:"current_meter",inputTxt:[],visionNum:1,pointInfor:[{position:[-20,0],direction:[-1,0]},{position:[20,0],direction:[1,0]}],padding:0,margin:1,txtLocate:11,aspectInfor:[{name:"path",attribute:{d:"M-20,0H20"}},{name:"polygon",attribute:{points:"10,0 4,-4 6,0 4,4",fill:"#3B4449"}},{name:"rect",attribute:{x:"-10",y:"-8",width:"20",height:"16","class":"focus-part"}}],introduction:""}},diode:{readWrite:{id:"VD_",input:["1","0.5","5M"]},readOnly:{partType:"diode",inputTxt:["","",""],parameterUnit:["V","",""],visionNum:1,txtLocate:18,padding:[1,0],margin:1,pointInfor:[{position:[0,-40],direction:[0,-1]},{position:[0,40],direction:[0,1]}],aspectInfor:[{name:"path",attribute:{d:"M0,-40V40M-13,-11H13"}},{name:"polygon",attribute:{points:"0,-11 -13,11 13,11","class":"fill-whole"}},{name:"rect",attribute:{x:"-13",y:"-30",width:"26",height:"60","class":"focus-part"}}],introduction:""}},transistor_npn:{readWrite:{id:"Q_",input:["40","26","0.6","1"]},readOnly:{partType:"transistor_npn",inputTxt:["","B","BE","CE"],parameterUnit:["","","V","V"],visionNum:1,txtLocate:25,padding:[1,1,1,0],margin:1,pointInfor:[{position:[-20,0],direction:[-1,0]},{position:[20,-40],direction:[0,-1]},{position:[20,40],direction:[0,1]}],aspectInfor:[{name:"path",attribute:{d:"M-20,0H0M0,-25V25M20,-40V-28L0,-12M0,12L20,28V40"}},{name:"polygon",attribute:{points:"0,0 -11,-6 -7,0 -11,6","class":"fill-whole",transform:"translate(18, 26.4) rotate(38.7)"}},{name:"rect",attribute:{x:"-10",y:"-30",width:"30",height:"60","class":"focus-part"}}],introduction:"NPN"}},operational_amplifier:{readWrite:{id:"OP_",input:["120","80M","60"]},readOnly:{partType:"operational_amplifier",inputTxt:["","",""],parameterUnit:["dB","",""],visionNum:1,txtLocate:0,padding:1,margin:1,pointInfor:[{position:[-40,-20],direction:[-1,0]},{position:[-40,20],direction:[-1,0]},{position:[40,0],direction:[1,0]}],aspectInfor:[{name:"path",attribute:{d:"M-25,-35V35L25,0Z","class":"white-fill"}},{name:"path",attribute:{d:"M-40,-20H-25M-40,20H-25M25,0H40"}},{name:"path",attribute:{d:"M-22,-20H-16M-22,20H-16M-19,17V23","stroke-width":"1"}},{name:"rect",attribute:{x:"-30",y:"-35",width:"60",height:"70","class":"focus-part"}}],introduction:""}}};i.prototype={constructor:i,length:0,pointRotate:function(){for(var t=[],e=0;e<this.pointInfor.length;e++){var n=this.pointInfor[e];t.push({position:this.rotate.multo([n.position])[0],direction:this.rotate.multo(n.direction)[0]})}return t},marginRotate:function(){for(var t={},e=["padding","margin"],n=0;n<2;n++){for(var r={left:0,right:0,top:0,bottom:0},i=this[e[n]],a=[[0,-i.top],[-i.left,0],[0,i.bottom],[i.right,0]],o=0;o<4;o++){var s=this.rotate.multo([a[o]])[0];0!==s[0]?s[0]>0?r.right=s[0]:r.left=-s[0]:0!==s[1]&&(s[1]>0?r.bottom=s[1]:r.top=-s[1])}t[e[n]]=r}return t},markSign:function(){var t=this.position.floorToSmall(),e=this.marginRotate().padding,n=this.pointRotate().map(function(t){return t.position});if(t[0]!==parseInt(t[0])||t[1]!==parseInt(t[1]))throw"";f.schMap.makePartSign(this.id,t,n,e)},deleteSign:function(){var t=this.position.floorToSmall(),e=this.marginRotate().padding,n=this.pointRotate().map(function(t){return t.position});f.schMap.deletePartSign(t,n,e)},setPosition:function(){this.elementDOM.attr("transform","matrix("+this.rotate.join(",")+","+this.position.join(",")+")")},textVisition:function(t){if(!this.visionNum)return!1;void 0===t&&(t=[this.txtLocate,-this.txtLocate]);var e=(0,c.$)("text",this.elementDOM),n=(0,c.$)("tspan",e),r=this.pointRotate(),i=(0,c.$)(".part-rotate",this.elementDOM),a=this.rotate.inverse();e.attr("transform","matrix("+a.join(",")+",0,0)"),i.length&&i.attr("transform","matrix("+a.join(",")+",0,0)");for(var o=0;o<r.length;o++){var s=r[o].direction;0===s[0]?(s[1]<0&&t[1]<0||s[1]>0&&t[1]>0)&&(t[1]=0):(s[0]<0&&t[0]<0||s[0]>0&&t[0]>0)&&(t[0]=0)}Math.abs(t[0])>Math.abs(t[1])?t[1]=0:t[0]=0;var u=(0,c.$)(".focus-part",this.elementDOM).attr(["width","height"]).map(function(t){return Number(t)}),l=/scale\(([\d.]+?)\)/.exec(g.attr("transform"))||[1,1],p=Number(l[1]),f=this.elementDOM.attr("transform");if(f){var d=f.match(/\d+/g).map(function(t){return Number(t)});f=new h.Matrix([[d[0],d[1]],[d[2],d[3]]])}else f=new h.Matrix([[1,0],[0,1]]);var y=f.multo([u])[0].map(function(t){return parseInt(Math.abs(t/2))}),v=4;if(t[0])if(t[0]>0){for(var m=y[0]+v,w=(0,c.$)(n[0]),b=0,x=-w.width(),T=2;T<n.length;T++){var M=(0,c.$)(n[T]),S=M.height()/p;M.attr({dx:x-(0,c.$)(n[T-1]).width()/p,dy:S}),b-=S,x=0}b=.5*(b+w.height()/p)-v,e.attr({x:m,y:b})}else{for(var _=(0,c.$)(n[0]),O=-(y[0]+v+_.width()/p+(0,c.$)(n[1]).width()/p),k=0,P=2;P<n.length;P++){var A=(0,c.$)(n[P]),C=A.height()/p;A.attr({dx:-(0,c.$)(n[P]).width()/p,dy:C}),k-=C}k=.5*(k+_.height()/p)-v,e.attr({x:O,y:k})}else if(t[1]>0){var j=(0,c.$)(n[0]),V=y[1]+j.height()/p-v,E=-.5*(j.width()/p+(0,c.$)(n[1]).width()/p);e.attr({x:E,y:V});for(var N=2;N<n.length;N++){var R=(0,c.$)(n[N]);R.attr({dx:-.5*R.width()/p+E,dy:R.height()/p})}}else{for(var L=(0,c.$)(n[0]),$=-.5*(L.width()/p+(0,c.$)(n[1]).width()/p),q=0,D=2;D<n.length;D++){var B=(0,c.$)(n[D]),I=B.height()/p;B.attr({dx:-.5*B.width()/p+$,dy:I}),q-=I}q-=y[1]+v,e.attr({x:$,y:q})}},createPart:function(){for(var t=(0,c.$)("<g>",v,{"class":"editor-parts",id:this.id,opacity:"0.4"}),e={circle:{},rect:{x:"-9",y:"-9",width:"18",height:"18","class":"rect-point"}},n=0;n<this.aspectInfor.length;n++){var r=this.aspectInfor[n].name,i=this.aspectInfor[n].attribute,a=(0,c.$)("<"+r+">",v);for(var o in i)i.hasOwnProperty(o)&&a.attr(o,i[o]);t.append(a)}for(var s=0;s<this.pointInfor.length;s++){var u=this.pointInfor[s].position,l=(0,c.$)("<g>",v,{id:this.id+"-"+s,transform:"translate("+u[0]+","+u[1]+")","class":"part-point point-open"});for(var p in e)e.hasOwnProperty(p)&&l.append((0,c.$)("<"+p+">",v,e[p]));t.append(l)}if(this.visionNum){for(var h=[],f=0;f<this.visionNum-1;f++)this.input[f]=this.input[f].replace("u",""),h.push(this.input[f]+this.parameterUnit[f]);var d=this.id.split("_"),y=(0,c.$)("<text>",v,{x:"0",y:"0","class":"features-text"});y.append((0,c.$)("<tspan>",v).text(d[0])),y.append((0,c.$)("<tspan>",v).text(d[1]));for(var m=0;m<h.length;m++)y.append((0,c.$)("<tspan>",v,{dx:"0",dy:"16"}).text(h[m]));t.append(y)}return g.append(t),t},sheetCover:function(t){function e(t){for(var e={},n=t.marginRotate(),r=0;r<4;r++){var i=["left","right","top","bottom"][r];e[i]=n.margin[i]+n.padding[i]}return e}t=new p.Point(t);for(var n={},r=e(this),i=this.marginRotate().margin,a=t.floorToSmall(),o=this.pointRotate().map(function(t){return p.Point.prototype.floorToSmall.call(t.position)}),s=0;s<o.length;s++){var u=a.add(o[s]);if(f.schMap.getSingleValueBySmalle(u))return!0;n[u.join(",")]=!0}for(var l=a[0]-i.left;l<=a[0]+i.right;l++)for(var c=a[1]-i.top;c<=a[1]+i.bottom;c++){var h=f.schMap.getSingleValueBySmalle([l,c]);if(h)return!0;n[l+","+c]=!0}for(var d=a[0]-r.left;d<=a[0]+r.right;d++)for(var v=a[1]-r.top;v<=a[1]+r.bottom;v++)if(!n[d+","+v]){var g=f.schMap.getSingleValueBySmalle([d,v]);if(g&&"part"===g.form){var m=y.partsAll.findPartObj(g.id),w=e(m),b=this.position.add(-1,m.position).floorToSmall();if(0!==b[0]){if(b[0]>0&&b[0]<r.left+w.right)return!0;if(-b[0]<r.right+w.left)return!0}if(0!==b[1]){if(b[1]>0&&b[1]<r.top+w.bottom)return!0;if(-b[1]<r.bottom+w.top)return!0}}}return!1},connectPoint:function(t,e){this.connect[t]=e,this.circle[t].attr("class","part-point point-close")},noConnectPoint:function(t){this.connect[t]=!1,this.circle[t].attr("class","part-point point-open")},shrinkPoint:function(t){(0,c.$)("circle",this.circle[t]).attr("style","")},enlargePoint:function(t){(0,c.$)("circle",this.circle[t]).attr("style","r:5")},focusOnly:function(){this.toStatus("focus"),y.partsNow.push(this)},toStatus:function(t){"focus"===t?this.elementDOM.addClass("focus"):"normal"===t&&this.elementDOM.removeClass("focus")},viewParameter:function(t,e){var n=(0,c.$)("#parameter-menu"),r=(0,c.$)(".parameter-bottom-line",n),i=(0,c.$)(".st-menu-input-group",n);i.remove();for(var a=0;a<this.inputTxt.length+1;a++){var o=(0,c.$)("<div>",{"class":"st-menu-input-group"});o.append((0,c.$)("<span>",{"class":"st-menu-input-introduce"})),o.append((0,c.$)("<input>",{required:""})),o.append((0,c.$)("<span>",{"class":"st-menu-input-highlight"})),o.append((0,c.$)("<span>",{"class":"st-menu-input-bar"})),o.append((0,c.$)("<span>",{"class":"st-menu-input-unit"})),n.preappend(o,r)}i=(0,c.$)(".st-menu-input-group",n);for(var s=3,u=0,l=0;l<i.length;l++){var p=l?this.inputTxt[l-1]:"",h=l?this.input[l-1]:this.id,f=l?this.parameterUnit[l-1]:"";this.input&&(this.input[l]=!!this.input[l]&&this.input[l].replace("","u"));var y=(0,c.$)(i[l]),v=y.childrens(0),g=y.childrens(4),m=y.childrens(1);y.attr("id","parameter-"+l),v.text(p),g.text(f),m.attr("value",h),s=v.width()>s?v.width():s,u=g.width()>u?g.width():u}this.input.length--,i.childrens(4).attr("style","left:"+(s+88)+"px"),i.childrens("input, span.st-menu-input-highlight, span.st-menu-input-bar").attr("style","left:"+s+"px");var w=110+s+u<175?175:110+s+u,b=-w/2,x=b,T=-n.height()-20,M=T/2+20,S=this.position[0]*t+e[0],_=this.position[1]*t+e[1],O=(0,c.$)("#parameter-menu-triangle-down");O.css("left","50%"),_+T<0?(O.addClass("triangle-up"),T=20):O.attr("class",""),S+b<0&&(x=10-S,O.css("left",S-10+"px")),S+w/2>window.outerWidth&&(x=(0,c.$)(window).width()-10-w-S,O.css("left",-x+"px"));var k=new d.styleRule("parameter-open"),P=new d.styleRule("parameter-close");k.setRule("0%",{opacity:0,transform:"scale(0,0)",left:S+b+"px",top:_+M+"px"}),k.setRule("100%",{opacity:1,transform:"scale(1,1)",left:S+x+"px",top:_+T+"px"}),P.setRule("0%",{opacity:1,transform:"scale(1,1)",left:S+x+"px",top:_+T+"px"}),P.setRule("100%",{opacity:0,transform:"scale(0,0)",left:S+b+"px",top:_+M+"px"}),n.css({width:w+"px",left:S+x+"px",top:_+T+"px"}),n.addClass("parameter-open"),n.removeClass("parameter-close"),(0,c.$)("body").addClass("open-gray")},inputVision:function(){var t=(0,c.$)("#parameter-menu"),e=/[A-Za-z]+_[0-9A-Za-z]+/i,n=/\d+(.\d+)?[GMkmunp]?/;t.attr("class","parameter-open");var r=!0,i=(0,c.$)("#parameter-0 input",t).prop("value");i.match(e)||(t.addClass("parameter-error-0"),r=!1);for(var a=0;a<this.inputTxt.length;a++){var o=(0,c.$)("#parameter-"+(a+1)+" input",t).prop("value"),s=o.match(n);s&&o===s[0]||(t.addClass("parameter-error-"+(a+1)),r=!1)}if(!r)return!1;this.exchangeID(i);for(var u=(0,c.$)("tspan",this.elementDOM),l=0;l<this.inputTxt.length;l++)this.input[l]=(0,c.$)("#parameter-"+(l+1)+" input",t).prop("value"),this.input[l]=this.input[l].replace("u",""),l<this.visionNum-1&&(u[l+2].textContent=this.input[l]+this.parameterUnit[l]);var p=(0,c.$)("text",this.elementDOM);return this.textVisition([parseInt(p.attr("x")),parseInt(p.attr("y"))]),!0},moveText:function(t){var e=this.current;e.position[0]+=(t.pageX-e.pageL[0])/e.zoom,e.position[1]+=(t.pageY-e.pageL[1])/e.zoom,e.pageL[0]=t.pageX,e.pageL[1]=t.pageY,e.text.attr({x:e.position[0],y:e.position[1]}),e.isMove=!0},moveSelf:function(t){var e=this.current.mouse(t),n=this.current.mouseBias(t),r=this.current.lines=this.current.lines||[];if(!this.current.isMove&&!this.current.isNew){this.deleteSign(this.current.map),this.current.lastPosition=Array.clone(this.position);for(var i=this.pointRotate(),a=i[0],o=i[1],s=0;s<this.connect.length;s++)this.connect[s]&&(r.push(y.partsAll.findPartObj(this.connect[s])),r[r.length-1].preMoveLine(this.position.add(a[s])),r[r.length-1].current.initTrend=m[o[s]][0]);MapTest.whole(y.partsAll,f.schMap),MapTest.clear()}if(this.current.isMove=!0,this.current.isNew?this.position=e:this.position=this.position.add(n),this.setPosition(),!(this.current&&this.current.lines&&this.current.lines.length))return!0;for(var u=0;u<r.length;u++){var l=r[u];l.current.startNode=l.current.startNode.add(n),l.moveToLine()}},rotateSelf:function(t){var e=new h.Matrix(rotateMatrix[t]),n=this.elementDOM.getElementsByTagName("text")[0];if(flagBit.totalMarks()||this.deleteSign(this.position),this.rotate=this.rotate.mul(e),flagBit.totalMarks()||this.markSign(),this.elementDOM.setAttribute("transform","matrix("+this.rotate.join(",")+","+this.position.join(",")+")"),this.visionNum){var r=e.mul([[Number(n.getAttribute("x")),Number(n.getAttribute("y"))]],"left")[0];this.textVisition(r)}for(var i=this.pointRotate(),a=[],o=this.connect.map(function(t){return y.partsAll.findPartObj(t)}),s=0;s<o.length;s++){var u=o[s];if(u){var l=[this.position[0]+i[0][s][0],this.position[1]+i[0][s][1]];if(u.connect[0]===this.id+"-"+s&&l.isEqual(u.way[0])||u.connect[1]===this.id+"-"+s&&l.isEqual(u.way[u.way.length-1])){a.push(!1);continue}a.push(l),u.deleteSign()}}for(var c=0;c<o.length;c++){var p=o[c];if(p&&a[c]){var f=a[c];p.connect[0]===this.id+"-"+c&&p.reversal();var d=void 0,v=SchematicMap.getSingleValueByOrigin(p.way[0]);if(v&&"part-point"===v.form){var w=v.id.split("-"),b=y.partsAll.findPartObj(w[0]),x=parseInt(w[1]),T=b.pointRotate();d=m[T[1][x]]}else d=Math.vector.init(p.way[0],p.way[1]);p.way.cloneWay(g.AstartSearch(p.way[0],f,d,1)),p.way.checkWayRepeat(),p.way.checkWayExcess(d,2),p.render(),p.markSign()}}},putDownSelf:function(){if(!this.current.isMove)return!1;var t=this.current.lastPosition,e=this.position.round();this.position=e.isEqual(t)?e:new p.Point(f.schMap.nodeRound(e,this.position,this.sheetCover.bind(this))),this.setPosition(),this.markSign(),this.current&&this.current.lines&&this.current.lines.length&&this.current.lines.forEach(function(t){t.way.standardize(),t.setCollectCircle(1),t.render(),t.markSign(),y.partsNow.push(t)}),this.current={}},deleteSelf:function(){for(var t=0;t<this.connect.length;t++)if(this.connect[t]){var e=y.partsAll.findPartObj(this.connect[t]);e.deleteSelf()}this.deleteSign();var n=document.getElementById("area-of-parts");n.removeChild(this.elementDOM),y.partsAll.deletePart(this)},toSimpleData:function(){var t='{ partType: "'+this.partType+'", id: "'+this.id+'", position: ['+this.position.join(",")+"], rotate: [["+this.rotate[0].join(",")+"],["+this.rotate[1].join(",")+"]]";if(this.visionNum){var e=this.elementDOM.getElementsByTagName("text")[0];t+=", text: ["+e.getAttribute("x")+","+e.getAttribute("y")+"]"}return t+=this.input?', input: ["'+this.input.join('","')+'"]},':"},"},exchangeID:function(t){if(t===this.id)return!1;var e=this.id;y.partsAll.deletePart(this),y.partsNow.pop(this);var n=(0,c.$)("tspan",this.elementDOM),r=(0,c.$)(".part-point",this.elementDOM);this.id=t,this.elementDOM.attr("id",this.id),n.get(0).text(this.id.slice(0,this.id.search("_"))),n.get(1).text(this.id.slice(this.id.search("_")+1));for(var i=0;i<this.connect.length;i++){var a=r.get(i),o=a.attr("id").split("-");if(o[0]=t,a.attr("id",o.join("-")),this.connect[i])for(var s=y.partsAll.findPartObj(this.connect[i]),u=0;u<s.connect.length;u++)if(s.connect[u]=e+"-"+i){s.connect[u]=t+"-"+i;break}}y.partsAll.push(this),y.partsNow.push(this)}};for(var b in w){var x=w[b].readOnly,T=x.pointInfor;x.padding=a(x.padding),x.margin=a(x.margin);for(var M=0;M<T.length;M++)T[M].direction=new h.Matrix([T[M].direction]);w.hasOwnProperty(b)&&((0,s["default"])(x,i.prototype),Object.freezeAll(x))}var S={shape:{},intro:{}};for(var _ in w)w.hasOwnProperty(_)&&(S.shape[_]=w[_].readOnly.aspectInfor,S.intro[_]=w[_].readOnly.introduction);e.PartClass=i,e.partsinfo=S},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=p.createElementNS(c,t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}function a(t){for("string"==typeof t&&(t=document.querySelectorAll("#test "+t));t.length;)t[0].parentNode.removeChild(t[0])}var o=n(2),s=r(o),u=n(104),l=n(110),c="http://www.w3.org/2000/svg",p=document,h={addPoint:function(t){var e=(0,s["default"])(t,2),n=e[0],r=e[1],a=arguments.length<=1||void 0===arguments[1]?"#00ff00":arguments[1],o=arguments.length<=2||void 0===arguments[2]?1:arguments[2],u=arguments.length<=3||void 0===arguments[3]?3:arguments[3];p.getElementById("test").appendChild(i("circle",{"stroke-width":"3",fill:"transparent",stroke:a,transform:"translate("+n*o+","+r*o+")",cx:"0",cy:"0",r:u,"class":"testPoint"}))},addPath:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?"#ff0000":arguments[1],n="M"+t[0].join(","),r=1;r<t.length;r++)n+="L"+t[r].join(",");p.getElementById("test").appendChild(i("path",{"stroke-width":"2",fill:"transparent",stroke:e,d:n,"class":"testPath"}))},addError:function(t){var e=(0,s["default"])(t,2),n=e[0],r=e[1],a=arguments.length<=1||void 0===arguments[1]?"#FF0000":arguments[1],o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];p.getElementById("test").appendChild(i("path",{"stroke-width":"3",fill:"transparent",stroke:a,transform:"translate("+n*o+","+r*o+")","class":"testError",d:"M-5,-5L5,5M5,-5L-5,5"}))},addText:function(t,e){var n=(0,s["default"])(t,2),r=n[0],a=n[1],o=i("text",{x:r,y:a,fill:"#3B4449","stroke-width":"0","font-size":"14"});o.textContent=e,p.getElementById("test").appendChild(o)},clear:function(t){switch(t){case"Point":return a(".testPoint"),!0;case"Path":return a(".testPath"),!0;case void 0:return a(p.querySelector("#test").childNodes),!0;default:return!1}},whole:function(){for(var t=0,e=0;e<l.partsAll.length;e++)"line"===l.partsAll[e].partType&&(this.addText([1e3,25*t+50],l.partsAll[e].connect[0]+"--->"+l.partsAll[e].id+"--->"+l.partsAll[e].connect[1]),t++);t++;for(var n in u.schMap)for(var r in u.schMap[n]){var i=u.schMap[n][r];if("part-point"===i.form?this.addPoint([n,r],"#ff0000",20,4):"part"===i.form&&this.addPoint([n,r],"#000000",20,4),i.connect){for(var a=0;a<i.connect.length;a++){var o=i.connect,s=o[a][0]-n,c=o[a][1]-r;s<0?this.addPath([[20*n,20*r-3],[20*o[a][0],20*o[a][1]-3]],"#000000"):s>0?this.addPath([[20*n,20*r+3],[20*o[a][0],20*o[a][1]+3]],"#000000"):c<0?this.addPath([[20*n-3,20*r],[20*o[a][0]-3,20*o[a][1]]],"#000000"):c>0&&this.addPath([[20*n+3,20*r],[20*o[a][0]+3,20*o[a][1]]],"#000000")}"line"===i.form?this.addPoint([n,r],"#0000ff",20,4):"cross-point"===i.form?this.addPoint([n,r],"#dcfc02",20,4):"line-point"===i.form&&this.addPoint([n,r],"#02fc31",20,4)}"line"===i.form?this.addText([20*n+5,20*r+15],i.id.split("_")[1]):"part-point"===i.form?this.addText([20*n+5,20*r+15],i.id.split("-")[1]):"cross-point"===i.form&&(this.addPath([[20*n,20*r],[1e3,25*t+50]],"#222222"),this.addText([1e3,25*t+50],i.id),t++)}},loadObstacles:function(t){t.forEach(function(t){for(var e=t[0],n=t[1],r=Math.vector.init(e,n,20),i=Array.clone(e);!i.isEqual(n);)SchematicMap.setSingleValueByOrigin(i,{form:"part",id:"Obstacles"}),this.addError(i),i=[i[0]+r[0],i[1]+r[1]]})}};window.MapTest=h}]);